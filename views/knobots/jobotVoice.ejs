<% layout('layouts/boilerplate')%>

<div id="app" class="container-fluid">
   <div class="row">
        <%- include('./jobotSidebar')%>
        <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
          <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
            <h1 class="h2">Voice and Chat @(<%= robot.title %>) </h1>
            <b>
              <p class="text-danger" v-if="!connected">Not connected!</p>
    				  <p class="text-success" v-if="connected">Connected!</p>
              <p class="text-success">{{ rosbridge_address }}</p>
            </b>
            <input type="hidden" id="current_user_id" name= "current_user_id" value="<%= currentUser._id %>" />
            <input type="hidden" id="connecturl" name="connecturl" value="<%= robot.connecturl %>" />
            <input type="hidden" id="robot_id" name="robot_id" value="<%= robot.id %>" />
            <button :disabled="loading" class="btn btn-danger" @click="disconnect" v-if="connected">Disconnect!</button>
    				<button :disabled="loading" class="btn btn-success" @click="connect" v-else>Connect!</button>
            <button :disabled="loading" class="btn btn-success" @click="remote"><span data-feather="cast"></span></button>
          </div>
          <div class="container">

              <!-- Modal for rendering the charts, declare this if you want to render charts,
               else you remove the modal -->
              <div id="modal1" class="modal">
                  <canvas id="modal-chart"></canvas>
              </div>

              <!--chatbot widget -->
              <div class="widget">
                  <div class="chat_header">

                      <!--Add the name of the bot here -->
                      <span class="chat_header_title">Chatbot (EN)</span>

                      <!-- Dropdown menu-->
                      <ul id='dropdown1' class='dropdown-content'>
                          <li><a href="#" id="clear">Clear</a></li>
                          <li><a href="#" id="restart">Restart</a></li>
                      </ul>
                  </div>

                  <!--Chatbot contents goes here -->
                  <div class="chats" id="chats">
                      <div class="clearfix"></div>

                  </div>

                  <!--keypad for user to type the message -->
                  <div class="keypad">
                      <textarea id="userInput" placeholder="Type a question for me ..." class="usrInput"></textarea>
                      <div id="sendButton"><i class="fa fa-paper-plane" aria-hidden="true"></i></div>
                  </div>
              </div>
        </main>
   </div>
</div>

<script type="text/javascript" src="/javascripts/eventemitter2.js"></script>
<script type="text/javascript" src="/javascripts/roslib.js"></script>
<script type="text/javascript" src="/javascripts/three.min.js"></script>
<script type="text/javascript" src="/javascripts/axios.min.js"></script>
<script type="text/javascript" src="/javascripts/vue.min.js"></script>
<script type="text/javascript" src="/javascripts/vuejs-datepicker.js"></script>
<!-- Main -->
<script type="text/javascript" src="/javascripts/main.js"></script>
<!-- Icons -->
<script type="text/javascript" src="/javascripts/feather.min.js"></script>
<script>
  feather.replace()
</script>
<!--JavaScript at end of body for optimized loading-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="/webchat/static/js/materialize.min.js"></script>

<!--Main Script -->
<script type="text/javascript" src="/webchat/static/js/embed-script.js"></script>

<!--Chart.js Script -->
<script type="text/javascript" src="/webchat/static/js/chart.min.js"></script>
