!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(self,(function(){return(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{BehaviorTree:()=>R,BehaviorTreeImporter:()=>ye,BranchNode:()=>Nt,Decorator:()=>N,FAILURE:()=>u,Introspector:()=>de,Node:()=>p,RUNNING:()=>n,Random:()=>Vt,SUCCESS:()=>o,Selector:()=>ne,Sequence:()=>se,Task:()=>g,decorators:()=>r,default:()=>me,getRegistry:()=>S,registryLookUp:()=>_});var r={};t.r(r),t.d(r,{AlwaysFailDecorator:()=>K,AlwaysSucceedDecorator:()=>rt,CooldownDecorator:()=>st,InvertDecorator:()=>gt,LoopDecorator:()=>Et});var n=Symbol("running"),o=!0,u=!1;function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},u=Object.keys(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s=function(){},p=function(){function t(e){var r=e.run,n=void 0===r?s:r,o=e.start,u=void 0===o?s:o,c=e.end,a=void 0===c?s:c,p=f(e,["run","start","end"]);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,"nodeType","Node"),this.blueprint=i({run:n,start:u,end:a},p)}var e,r;return e=t,(r=[{key:"run",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.introspector,o=e.rerun,u=void 0!==o&&o,c=e.registryLookUp,a=void 0===c?function(t){return t}:c,l=f(e,["introspector","rerun","registryLookUp"]);u||this.blueprint.start(t);var s=this.blueprint.run(t,i(i({},l),{},{rerun:u,registryLookUp:a}));return s!==n&&this.blueprint.end(t),r&&r.push(this,s,t),s}},{key:"name",get:function(){return this._name||this.blueprint.name},set:function(t){this._name=t}}])&&a(e.prototype,r),t}();function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?O(t):e}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(o,t);var e,r,n=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=d(e);if(r){var o=d(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return v(this,t)});function o(){var t;b(this,o);for(var e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return m(O(t=n.call.apply(n,[this].concat(r))),"nodeType","Task"),t}return o}(p);function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var P={};function S(){return P}function _(t){if("string"==typeof t){var e=P[t];if(!e)throw new Error("No node with name ".concat(t," registered."));return e}return t}var R=function(){function t(e){var r=e.tree,n=e.blackboard;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tree=r,this.blackboard=n,this.lastResult=null}var e,r,o;return e=t,o=[{key:"register",value:function(t,e){P[t]="function"==typeof e?new g({name:t,run:e}):e}},{key:"cleanRegistry",value:function(){P={}}}],(r=[{key:"step",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.introspector,r=this.lastResult&&"object"===w(this.lastResult)?this.lastResult:[],o=this.lastResult===n||r.length>0;e&&e.start(this),this.lastResult=_(this.tree).run(this.blackboard,{indexes:r,introspector:e,rerun:o,registryLookUp:_}),e&&e.end()}}])&&j(e.prototype,r),o&&j(e,o),t}();function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function E(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?T(Object(r),!0).forEach((function(e){I(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function x(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},u=Object.keys(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function B(t,e){return(B=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?U(t):e}function U(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&B(t,e)}(i,t);var e,r,o,u,c=(o=i,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=L(o);if(u){var r=L(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return D(this,t)});function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.config,n=void 0===r?{}:r,o=x(e,["config"]);return A(this,i),I(U(t=c.call(this,o)),"nodeType","Decorator"),t.setConfig(n),t}return e=i,(r=[{key:"decorate",value:function(t){return t()}},{key:"run",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.introspector,u=r.rerun,c=r.registryLookUp,i=void 0===c?function(t){return t}:c,f=x(r,["introspector","rerun","registryLookUp"]);u||this.blueprint.start(t);var a=0,l=this.decorate((function(){return++a,i(e.blueprint.node).run(t,E(E({},f),{},{rerun:u,introspector:o,registryLookUp:i}))}),t,this.config);return l!==n&&this.blueprint.end(t),o&&o.wrapLast(a,this,l,t),l}},{key:"setConfig",value:function(t){this.config=t}}])&&C(e.prototype,r),i}(p);function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $(t,e){return($=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function G(t,e){return!e||"object"!==M(e)&&"function"!=typeof e?z(t):e}function z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function J(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$(t,e)}(f,t);var e,r,o,c,i=(o=f,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=H(o);if(c){var r=H(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return G(this,t)});function f(){var t;q(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return J(z(t=i.call.apply(i,[this].concat(r))),"nodeType","AlwaysFailDecorator"),t}return e=f,(r=[{key:"decorate",value:function(t){return t()===n?n:u}}])&&F(e.prototype,r),f}(N);function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function X(t,e){return(X=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Y(t,e){return!e||"object"!==Q(e)&&"function"!=typeof e?Z(t):e}function Z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function et(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var rt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&X(t,e)}(f,t);var e,r,u,c,i=(u=f,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=tt(u);if(c){var r=tt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return Y(this,t)});function f(){var t;V(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return et(Z(t=i.call.apply(i,[this].concat(r))),"nodeType","AlwaysSucceedDecorator"),t}return e=f,(r=[{key:"decorate",value:function(t){return t()===n?n:o}}])&&W(e.prototype,r),f}(N);function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ct(t,e){return(ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function it(t,e){return!e||"object"!==nt(e)&&"function"!=typeof e?ft(t):e}function ft(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function at(t){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var st=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ct(t,e)}(i,t);var e,r,n,o,c=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=at(n);if(o){var r=at(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return it(this,t)});function i(){var t;ot(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return lt(ft(t=c.call.apply(c,[this].concat(r))),"nodeType","CooldownDecorator"),t}return e=i,(r=[{key:"setConfig",value:function(t){var e=t.cooldown,r=void 0===e?5:e;this.config={cooldown:r}}},{key:"decorate",value:function(t){var e=this;return this.lock?u:(this.lock=!0,setTimeout((function(){e.lock=!1}),1e3*this.config.cooldown),t())}}])&&ut(e.prototype,r),i}(N);function pt(t){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ht(t,e){return(ht=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vt(t,e){return!e||"object"!==pt(e)&&"function"!=typeof e?Ot(t):e}function Ot(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dt(t){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ht(t,e)}(a,t);var e,r,c,i,f=(c=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=dt(c);if(i){var r=dt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return vt(this,t)});function a(){var t;yt(this,a);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return mt(Ot(t=f.call.apply(f,[this].concat(r))),"nodeType","InvertDecorator"),t}return e=a,(r=[{key:"decorate",value:function(t){var e=t();return e===n?n:e===o?u:o}}])&&bt(e.prototype,r),a}(N);function wt(t){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _t(t,e){return!e||"object"!==wt(e)&&"function"!=typeof e?Rt(t):e}function Rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&St(t,e)}(i,t);var e,r,n,o,c=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=kt(n);if(o){var r=kt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return _t(this,t)});function i(){var t;jt(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Tt(Rt(t=c.call.apply(c,[this].concat(r))),"nodeType","LoopDecorator"),t}return e=i,(r=[{key:"setConfig",value:function(t){var e=t.loop,r=void 0===e?1/0:e;this.config={loop:r}}},{key:"decorate",value:function(t){for(var e=0,r=u;e++<this.config.loop;)if((r=t())===u)return u;return r}}])&&Pt(e.prototype,r),i}(N);function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t){return function(t){if(Array.isArray(t))return Ct(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ct(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ct(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Bt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Dt(t,e){return(Dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ut(t,e){return!e||"object"!==xt(e)&&"function"!=typeof e?Lt(t):e}function Lt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function It(t){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dt(t,e)}(i,t);var e,r,o,u,c=(o=i,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=It(o);if(u){var r=It(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return Ut(this,t)});function i(t){var e,r,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o="BranchNode",(n="nodeType")in(r=Lt(e=c.call(this,t)))?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,e.numNodes=t.nodes.length,e.wasRunning=!1,e}return e=i,(r=[{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.indexes,o=void 0===r?[]:r,u=e.introspector,c=e.rerun,i=e.registryLookUp,f=void 0===i?function(t){return t}:i;c||this.blueprint.start(t);for(var a=this.START_CASE,l=o.shift()||0;l<this.numNodes;){var s=f(this.blueprint.nodes[l]),p=s.run(t,{indexes:o,introspector:u,rerun:c,registryLookUp:f});if(p===n){this.wasRunning=!0,a=[l].concat(At(o));break}if("object"===xt(p)){a=[].concat(At(o),[l],At(p));break}if(p===this.OPT_OUT_CASE){a=p;break}this.wasRunning=!1,c=!1,++l}var y=a===n||"object"===xt(a);if(y||this.blueprint.end(t),u){var b=y?n:a;u.wrapLast(Math.min(l+1,this.numNodes),this,b,t)}return a}}])&&Bt(e.prototype,r),i}(p);function Mt(t){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qt(t){return function(t){if(Array.isArray(t))return Ft(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ft(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ft(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zt(t,e){return(zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ht(t,e){return!e||"object"!==Mt(e)&&"function"!=typeof e?Jt(t):e}function Jt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kt(t){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Vt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zt(t,e)}(i,t);var e,r,o,u,c=(o=i,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Kt(o);if(u){var r=Kt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return Ht(this,t)});function i(){var t;$t(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Qt(Jt(t=c.call.apply(c,[this].concat(r))),"nodeType","Random"),t}return e=i,(r=[{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.indexes,o=void 0===r?[]:r,u=e.introspector,c=e.rerun,i=e.registryLookUp,f=void 0===i?function(t){return t}:i;c||this.blueprint.start(t);var a=o.shift()||0;c||(a=Math.floor(Math.random()*this.numNodes));var l=f(this.blueprint.nodes[a]),s=l.run(t,{indexes:o,introspector:u,rerun:c,registryLookUp:f}),p=s;s===n?p=[a].concat(qt(o)):"object"===Mt(s)&&(p=[].concat(qt(o),[a],qt(s)));var y=p===n||"object"===Mt(p);if(y||this.blueprint.end(t),u){var b=y?n:p;u.wrapLast(1,this,b,t)}return p}}])&&Gt(e.prototype,r),i}(Nt);function Wt(t){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yt(t,e){return(Yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zt(t,e){return!e||"object"!==Wt(e)&&"function"!=typeof e?te(t):e}function te(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ee(t){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function re(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ne=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yt(t,e)}(c,t);var e,r,n=(e=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=ee(e);if(r){var o=ee(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return Zt(this,t)});function c(){var t;Xt(this,c);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return re(te(t=n.call.apply(n,[this].concat(r))),"nodeType","Selector"),re(te(t),"START_CASE",u),re(te(t),"OPT_OUT_CASE",o),t}return c}(Nt);function oe(t){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ce(t,e){return(ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ie(t,e){return!e||"object"!==oe(e)&&"function"!=typeof e?fe(t):e}function fe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ae(t){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function le(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ce(t,e)}(c,t);var e,r,n=(e=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=ae(e);if(r){var o=ae(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return ie(this,t)});function c(){var t;ue(this,c);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return le(fe(t=n.call.apply(n,[this].concat(r))),"nodeType","Sequence"),le(fe(t),"START_CASE",o),le(fe(t),"OPT_OUT_CASE",u),t}return c}(Nt);function pe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ye=function(){function t(){var e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r={task:g,decorator:N,selector:ne,sequence:se,random:Vt,invert:gt,fail:K,succeed:rt,cooldown:st,loop:Et},(e="types")in this?Object.defineProperty(this,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[e]=r}var e,r;return e=t,(r=[{key:"defineType",value:function(t,e){this.types[t]=e}},{key:"parse",value:function(t){var e=this,r=t.type,n=t.name,o=t.node,u=t.nodes,c=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},u=Object.keys(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,["type","name","node","nodes"]),i=this.types[r];if(!i){var f=_(r);if(f)return f.name=n,f;throw new Error("Don't know how to handle type ".concat(r,". Please register this first."))}return new i({name:n,node:o?this.parse(o):null,nodes:u?u.map((function(t){return e.parse(t)})):null,config:c})}}])&&pe(e.prototype,r),t}();function be(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function he(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?be(Object(r),!0).forEach((function(e){ve(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ve(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var de=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.results=[]}var e,r;return e=t,(r=[{key:"start",value:function(t){this.tree=t,this.currentResult=[]}},{key:"end",value:function(){this.results.push(this.currentResult.pop()),delete this.tree,delete this.currentResult}},{key:"push",value:function(t,e,r){this.currentResult.push(this._toResult(t,e,r))}},{key:"wrapLast",value:function(t,e,r,n){var o=this.currentResult.splice(this.currentResult.length-t,t);this.currentResult.push(he(he({},this._toResult(e,r,n)),{},{children:o}))}},{key:"_toResult",value:function(t,e){return he(he({},t.name?{name:t.name}:{}),{},{result:e})}},{key:"reset",value:function(){this.results=[]}},{key:"lastResult",get:function(){return 0===this.results.length?null:this.results[this.results.length-1]}}])&&Oe(e.prototype,r),t}();const me=R;return e})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2JlaGF2aW9ydHJlZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2JlaGF2aW9ydHJlZS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2JlaGF2aW9ydHJlZS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2JlaGF2aW9ydHJlZS8uL3NyYy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vYmVoYXZpb3J0cmVlLy4vc3JjL05vZGUuanMiLCJ3ZWJwYWNrOi8vYmVoYXZpb3J0cmVlLy4vc3JjL1Rhc2suanMiLCJ3ZWJwYWNrOi8vYmVoYXZpb3J0cmVlLy4vc3JjL0JlaGF2aW9yVHJlZS5qcyIsIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvLi9zcmMvRGVjb3JhdG9yLmpzIiwid2VicGFjazovL2JlaGF2aW9ydHJlZS8uL3NyYy9kZWNvcmF0b3JzL0Fsd2F5c0ZhaWxEZWNvcmF0b3IuanMiLCJ3ZWJwYWNrOi8vYmVoYXZpb3J0cmVlLy4vc3JjL2RlY29yYXRvcnMvQWx3YXlzU3VjY2VlZERlY29yYXRvci5qcyIsIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvLi9zcmMvZGVjb3JhdG9ycy9Db29sZG93bkRlY29yYXRvci5qcyIsIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvLi9zcmMvZGVjb3JhdG9ycy9JbnZlcnREZWNvcmF0b3IuanMiLCJ3ZWJwYWNrOi8vYmVoYXZpb3J0cmVlLy4vc3JjL2RlY29yYXRvcnMvTG9vcERlY29yYXRvci5qcyIsIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvLi9zcmMvQnJhbmNoTm9kZS5qcyIsIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvLi9zcmMvUmFuZG9tLmpzIiwid2VicGFjazovL2JlaGF2aW9ydHJlZS8uL3NyYy9TZWxlY3Rvci5qcyIsIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvLi9zcmMvU2VxdWVuY2UuanMiLCJ3ZWJwYWNrOi8vYmVoYXZpb3J0cmVlLy4vc3JjL0JlaGF2aW9yVHJlZUltcG9ydGVyLmpzIiwid2VicGFjazovL2JlaGF2aW9ydHJlZS8uL3NyYy9JbnRyb3NwZWN0b3IuanMiLCJ3ZWJwYWNrOi8vYmVoYXZpb3J0cmVlLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsImEiLCJpIiwic2VsZiIsIl9fd2VicGFja19yZXF1aXJlX18iLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwiUlVOTklORyIsIlNVQ0NFU1MiLCJGQUlMVVJFIiwiTk9PUCIsIk5vZGUiLCJydW4iLCJzdGFydCIsImVuZCIsInByb3BzIiwidGhpcyIsImJsdWVwcmludCIsImJsYWNrYm9hcmQiLCJpbnRyb3NwZWN0b3IiLCJyZXJ1biIsInJlZ2lzdHJ5TG9va1VwIiwieCIsImNvbmZpZyIsInJlc3VsdCIsInB1c2giLCJfbmFtZSIsIm5hbWUiLCJUYXNrIiwicmVnaXN0cnkiLCJnZXRSZWdpc3RyeSIsIm5vZGUiLCJsb29rZWRVcE5vZGUiLCJFcnJvciIsIkJlaGF2aW9yVHJlZSIsInRyZWUiLCJsYXN0UmVzdWx0IiwiaW5kZXhlcyIsImxlbmd0aCIsIkRlY29yYXRvciIsInNldENvbmZpZyIsInJ1bkNvdW50IiwiZGVjb3JhdGUiLCJ3cmFwTGFzdCIsIkFsd2F5c0ZhaWxEZWNvcmF0b3IiLCJBbHdheXNTdWNjZWVkRGVjb3JhdG9yIiwiQ29vbGRvd25EZWNvcmF0b3IiLCJjb29sZG93biIsImxvY2siLCJzZXRUaW1lb3V0IiwiSW52ZXJ0RGVjb3JhdG9yIiwiTG9vcERlY29yYXRvciIsImxvb3AiLCJJbmZpbml0eSIsIkJyYW5jaE5vZGUiLCJudW1Ob2RlcyIsIm5vZGVzIiwid2FzUnVubmluZyIsIm92ZXJhbGxSZXN1bHQiLCJTVEFSVF9DQVNFIiwiY3VycmVudEluZGV4Iiwic2hpZnQiLCJPUFRfT1VUX0NBU0UiLCJpc1J1bm5pbmciLCJkZWJ1Z1Jlc3VsdCIsIk1hdGgiLCJtaW4iLCJSYW5kb20iLCJmbG9vciIsInJhbmRvbSIsIlNlbGVjdG9yIiwiU2VxdWVuY2UiLCJCZWhhdmlvclRyZWVJbXBvcnRlciIsInRhc2siLCJkZWNvcmF0b3IiLCJzZWxlY3RvciIsInNlcXVlbmNlIiwiaW52ZXJ0IiwiZmFpbCIsInN1Y2NlZWQiLCJ0eXBlIiwiS2xhc3MiLCJ0eXBlcyIsImpzb24iLCJyZWdpc3RlcmVkTm9kZSIsInBhcnNlIiwibWFwIiwic3ViSnNvbiIsIkludHJvc3BlY3RvciIsInJlc3VsdHMiLCJjdXJyZW50UmVzdWx0IiwicG9wIiwiX3RvUmVzdWx0IiwibnVtUmVzdWx0cyIsImNoaWxkcmVuIiwic3BsaWNlIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUEyQ0EsRUFBTUMsR0FDaEQsR0FBc0IsaUJBQVpDLFNBQTBDLGlCQUFYQyxPQUN4Q0EsT0FBT0QsUUFBVUQsU0FDYixHQUFxQixtQkFBWEcsUUFBeUJBLE9BQU9DLElBQzlDRCxPQUFPLEdBQUlILE9BQ1AsQ0FDSixJQUFJSyxFQUFJTCxJQUNSLElBQUksSUFBSU0sS0FBS0QsR0FBdUIsaUJBQVpKLFFBQXVCQSxRQUFVRixHQUFNTyxHQUFLRCxFQUFFQyxJQVB4RSxDQVNHQyxNQUFNLFdBQ1QsTSxtQkNUQSxJQUFJQyxFQUFzQixDQ0ExQixFQUF3QixDQUFDUCxFQUFTUSxLQUNqQyxJQUFJLElBQUlDLEtBQU9ELEVBQ1hELEVBQW9CRyxFQUFFRixF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LCszQkM5Q2VpRSxHLFdBQ25CLGMsNEZBQWMsU0FDWnhFLEtBQUt5RSxRQUFVLEcsMENBR2pCLFNBQU10RCxHQUNKbkIsS0FBS21CLEtBQU9BLEVBQ1puQixLQUFLMEUsY0FBZ0IsSyxpQkFHdkIsV0FDRTFFLEtBQUt5RSxRQUFRaEUsS0FBS1QsS0FBSzBFLGNBQWNDLGNBQzlCM0UsS0FBS21CLFlBQ0xuQixLQUFLMEUsZ0Isa0JBR2QsU0FBSzNELEVBQU1QLEVBQVFOLEdBQ2pCRixLQUFLMEUsY0FBY2pFLEtBQUtULEtBQUs0RSxVQUFVN0QsRUFBTVAsRUFBUU4sTSxzQkFHdkQsU0FBUzJFLEVBQVk5RCxFQUFNUCxFQUFRTixHQUNqQyxJQUFNNEUsRUFBVzlFLEtBQUswRSxjQUFjSyxPQUFPL0UsS0FBSzBFLGNBQWNwRCxPQUFTdUQsRUFBWUEsR0FDbkY3RSxLQUFLMEUsY0FBY2pFLEtBQW5CLFNBQTZCVCxLQUFLNEUsVUFBVTdELEVBQU1QLEVBQVFOLElBQTFELElBQXVFNEUsZ0IsdUJBR3pFLFNBQVUvRCxFQUFNUCxHQUNkLGdCQUFhTyxFQUFLSixLQUFPLENBQUVBLEtBQU1JLEVBQUtKLE1BQVMsSUFBL0MsSUFBb0RILGEsbUJBR3RELFdBQ0VSLEtBQUt5RSxRQUFVLEssc0JBR2pCLFdBQ0UsT0FBNEIsSUFBeEJ6RSxLQUFLeUUsUUFBUW5ELE9BQ1IsS0FFRnRCLEtBQUt5RSxRQUFRekUsS0FBS3lFLFFBQVFuRCxPQUFTLFEsdUJDckI5QyxXIiwiZmlsZSI6ImluZGV4LnVtZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSB7XG5cdFx0dmFyIGEgPSBmYWN0b3J5KCk7XG5cdFx0Zm9yKHZhciBpIGluIGEpICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBleHBvcnRzIDogcm9vdClbaV0gPSBhW2ldO1xuXHR9XG59KShzZWxmLCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImV4cG9ydCBjb25zdCBSVU5OSU5HID0gU3ltYm9sKCdydW5uaW5nJylcbmV4cG9ydCBjb25zdCBTVUNDRVNTID0gdHJ1ZVxuZXhwb3J0IGNvbnN0IEZBSUxVUkUgPSBmYWxzZVxuIiwiaW1wb3J0IHsgUlVOTklORyB9IGZyb20gJy4vY29uc3RhbnRzJ1xuXG5jb25zdCBOT09QID0gKCkgPT4ge31cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm9kZSB7XG4gIG5vZGVUeXBlID0gJ05vZGUnXG5cbiAgY29uc3RydWN0b3IoeyBydW4gPSBOT09QLCBzdGFydCA9IE5PT1AsIGVuZCA9IE5PT1AsIC4uLnByb3BzIH0pIHtcbiAgICB0aGlzLmJsdWVwcmludCA9IHsgcnVuLCBzdGFydCwgZW5kLCAuLi5wcm9wcyB9XG4gIH1cblxuICBydW4oYmxhY2tib2FyZCwgeyBpbnRyb3NwZWN0b3IsIHJlcnVuID0gZmFsc2UsIHJlZ2lzdHJ5TG9va1VwID0gKHgpID0+IHgsIC4uLmNvbmZpZyB9ID0ge30pIHtcbiAgICBpZiAoIXJlcnVuKSB0aGlzLmJsdWVwcmludC5zdGFydChibGFja2JvYXJkKVxuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuYmx1ZXByaW50LnJ1bihibGFja2JvYXJkLCB7IC4uLmNvbmZpZywgcmVydW4sIHJlZ2lzdHJ5TG9va1VwIH0pXG4gICAgaWYgKHJlc3VsdCAhPT0gUlVOTklORykge1xuICAgICAgdGhpcy5ibHVlcHJpbnQuZW5kKGJsYWNrYm9hcmQpXG4gICAgfVxuICAgIGlmIChpbnRyb3NwZWN0b3IpIHtcbiAgICAgIGludHJvc3BlY3Rvci5wdXNoKHRoaXMsIHJlc3VsdCwgYmxhY2tib2FyZClcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX25hbWUgfHwgdGhpcy5ibHVlcHJpbnQubmFtZVxuICB9XG5cbiAgc2V0IG5hbWUobmFtZSkge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lXG4gIH1cbn1cbiIsImltcG9ydCBOb2RlIGZyb20gJy4vTm9kZSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFzayBleHRlbmRzIE5vZGUge1xuICBub2RlVHlwZSA9ICdUYXNrJ1xufVxuIiwiaW1wb3J0IHsgUlVOTklORyB9IGZyb20gJy4vY29uc3RhbnRzJ1xuaW1wb3J0IFRhc2sgZnJvbSAnLi9UYXNrJ1xuXG5sZXQgcmVnaXN0cnkgPSB7fVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVnaXN0cnkoKSB7XG4gIHJldHVybiByZWdpc3RyeVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0cnlMb29rVXAobm9kZSkge1xuICBpZiAodHlwZW9mIG5vZGUgPT09ICdzdHJpbmcnKSB7XG4gICAgY29uc3QgbG9va2VkVXBOb2RlID0gcmVnaXN0cnlbbm9kZV1cbiAgICBpZiAoIWxvb2tlZFVwTm9kZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBub2RlIHdpdGggbmFtZSAke25vZGV9IHJlZ2lzdGVyZWQuYClcbiAgICB9XG4gICAgcmV0dXJuIGxvb2tlZFVwTm9kZVxuICB9XG4gIHJldHVybiBub2RlXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJlaGF2aW9yVHJlZSB7XG4gIGNvbnN0cnVjdG9yKHsgdHJlZSwgYmxhY2tib2FyZCB9KSB7XG4gICAgdGhpcy50cmVlID0gdHJlZVxuICAgIHRoaXMuYmxhY2tib2FyZCA9IGJsYWNrYm9hcmRcbiAgICB0aGlzLmxhc3RSZXN1bHQgPSBudWxsXG4gIH1cblxuICBzdGVwKHsgaW50cm9zcGVjdG9yIH0gPSB7fSkge1xuICAgIGNvbnN0IGluZGV4ZXMgPSB0aGlzLmxhc3RSZXN1bHQgJiYgdHlwZW9mIHRoaXMubGFzdFJlc3VsdCA9PT0gJ29iamVjdCcgPyB0aGlzLmxhc3RSZXN1bHQgOiBbXVxuICAgIGNvbnN0IHJlcnVuID0gdGhpcy5sYXN0UmVzdWx0ID09PSBSVU5OSU5HIHx8IGluZGV4ZXMubGVuZ3RoID4gMFxuICAgIGlmIChpbnRyb3NwZWN0b3IpIHtcbiAgICAgIGludHJvc3BlY3Rvci5zdGFydCh0aGlzKVxuICAgIH1cbiAgICB0aGlzLmxhc3RSZXN1bHQgPSByZWdpc3RyeUxvb2tVcCh0aGlzLnRyZWUpLnJ1bih0aGlzLmJsYWNrYm9hcmQsIHtcbiAgICAgIGluZGV4ZXMsXG4gICAgICBpbnRyb3NwZWN0b3IsXG4gICAgICByZXJ1bixcbiAgICAgIHJlZ2lzdHJ5TG9va1VwXG4gICAgfSlcbiAgICBpZiAoaW50cm9zcGVjdG9yKSB7XG4gICAgICBpbnRyb3NwZWN0b3IuZW5kKClcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgcmVnaXN0ZXIobmFtZSwgbm9kZSkge1xuICAgIHJlZ2lzdHJ5W25hbWVdID0gdHlwZW9mIG5vZGUgPT09ICdmdW5jdGlvbicgPyBuZXcgVGFzayh7IG5hbWUsIHJ1bjogbm9kZSB9KSA6IG5vZGVcbiAgfVxuXG4gIHN0YXRpYyBjbGVhblJlZ2lzdHJ5KCkge1xuICAgIHJlZ2lzdHJ5ID0ge31cbiAgfVxufVxuIiwiaW1wb3J0IHsgUlVOTklORyB9IGZyb20gJy4vY29uc3RhbnRzJ1xuaW1wb3J0IE5vZGUgZnJvbSAnLi9Ob2RlJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEZWNvcmF0b3IgZXh0ZW5kcyBOb2RlIHtcbiAgbm9kZVR5cGUgPSAnRGVjb3JhdG9yJ1xuXG4gIGNvbnN0cnVjdG9yKHsgY29uZmlnID0ge30sIC4uLnByb3BzIH0gPSB7fSkge1xuICAgIHN1cGVyKHByb3BzKVxuICAgIHRoaXMuc2V0Q29uZmlnKGNvbmZpZylcbiAgfVxuXG4gIGRlY29yYXRlKHJ1bikge1xuICAgIC8vIFRoaXMgbWV0aG9kIHNob3VsZCBiZSBvdmVycmlkZGVuIHRvIG1ha2UgaXQgdXNlZnVsXG4gICAgcmV0dXJuIHJ1bigpXG4gIH1cblxuICBydW4oYmxhY2tib2FyZCwgeyBpbnRyb3NwZWN0b3IsIHJlcnVuLCByZWdpc3RyeUxvb2tVcCA9ICh4KSA9PiB4LCAuLi5jb25maWcgfSA9IHt9KSB7XG4gICAgaWYgKCFyZXJ1bikgdGhpcy5ibHVlcHJpbnQuc3RhcnQoYmxhY2tib2FyZClcbiAgICBsZXQgcnVuQ291bnQgPSAwXG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5kZWNvcmF0ZShcbiAgICAgICgpID0+IHtcbiAgICAgICAgKytydW5Db3VudFxuICAgICAgICByZXR1cm4gcmVnaXN0cnlMb29rVXAodGhpcy5ibHVlcHJpbnQubm9kZSkucnVuKGJsYWNrYm9hcmQsIHtcbiAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgcmVydW4sXG4gICAgICAgICAgaW50cm9zcGVjdG9yLFxuICAgICAgICAgIHJlZ2lzdHJ5TG9va1VwXG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgYmxhY2tib2FyZCxcbiAgICAgIHRoaXMuY29uZmlnXG4gICAgKVxuXG4gICAgaWYgKHJlc3VsdCAhPT0gUlVOTklORykge1xuICAgICAgdGhpcy5ibHVlcHJpbnQuZW5kKGJsYWNrYm9hcmQpXG4gICAgfVxuICAgIGlmIChpbnRyb3NwZWN0b3IpIHtcbiAgICAgIGludHJvc3BlY3Rvci53cmFwTGFzdChydW5Db3VudCwgdGhpcywgcmVzdWx0LCBibGFja2JvYXJkKVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBzZXRDb25maWcoY29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWdcbiAgfVxufVxuIiwiaW1wb3J0IHsgUlVOTklORywgRkFJTFVSRSB9IGZyb20gJy4uL2NvbnN0YW50cydcbmltcG9ydCBEZWNvcmF0b3IgZnJvbSAnLi4vRGVjb3JhdG9yJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbHdheXNGYWlsRGVjb3JhdG9yIGV4dGVuZHMgRGVjb3JhdG9yIHtcbiAgbm9kZVR5cGUgPSAnQWx3YXlzRmFpbERlY29yYXRvcidcblxuICBkZWNvcmF0ZShydW4pIHtcbiAgICBjb25zdCByZXN1bHQgPSBydW4oKVxuICAgIGlmIChyZXN1bHQgPT09IFJVTk5JTkcpIHJldHVybiBSVU5OSU5HXG4gICAgcmV0dXJuIEZBSUxVUkVcbiAgfVxufVxuIiwiaW1wb3J0IHsgUlVOTklORywgU1VDQ0VTUyB9IGZyb20gJy4uL2NvbnN0YW50cydcbmltcG9ydCBEZWNvcmF0b3IgZnJvbSAnLi4vRGVjb3JhdG9yJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbHdheXNTdWNjZWVkRGVjb3JhdG9yIGV4dGVuZHMgRGVjb3JhdG9yIHtcbiAgbm9kZVR5cGUgPSAnQWx3YXlzU3VjY2VlZERlY29yYXRvcidcblxuICBkZWNvcmF0ZShydW4pIHtcbiAgICBjb25zdCByZXN1bHQgPSBydW4oKVxuICAgIGlmIChyZXN1bHQgPT09IFJVTk5JTkcpIHJldHVybiBSVU5OSU5HXG4gICAgcmV0dXJuIFNVQ0NFU1NcbiAgfVxufVxuIiwiaW1wb3J0IHsgRkFJTFVSRSB9IGZyb20gJy4uL2NvbnN0YW50cydcbmltcG9ydCBEZWNvcmF0b3IgZnJvbSAnLi4vRGVjb3JhdG9yJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb29sZG93bkRlY29yYXRvciBleHRlbmRzIERlY29yYXRvciB7XG4gIG5vZGVUeXBlID0gJ0Nvb2xkb3duRGVjb3JhdG9yJ1xuXG4gIHNldENvbmZpZyh7IGNvb2xkb3duID0gNSB9KSB7XG4gICAgdGhpcy5jb25maWcgPSB7XG4gICAgICBjb29sZG93blxuICAgIH1cbiAgfVxuXG4gIGRlY29yYXRlKHJ1bikge1xuICAgIGlmICh0aGlzLmxvY2spIHtcbiAgICAgIHJldHVybiBGQUlMVVJFXG4gICAgfVxuICAgIHRoaXMubG9jayA9IHRydWVcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMubG9jayA9IGZhbHNlXG4gICAgfSwgdGhpcy5jb25maWcuY29vbGRvd24gKiAxMDAwKVxuICAgIHJldHVybiBydW4oKVxuICB9XG59XG4iLCJpbXBvcnQgeyBSVU5OSU5HLCBTVUNDRVNTLCBGQUlMVVJFIH0gZnJvbSAnLi4vY29uc3RhbnRzJ1xuaW1wb3J0IERlY29yYXRvciBmcm9tICcuLi9EZWNvcmF0b3InXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEludmVydERlY29yYXRvciBleHRlbmRzIERlY29yYXRvciB7XG4gIG5vZGVUeXBlID0gJ0ludmVydERlY29yYXRvcidcblxuICBkZWNvcmF0ZShydW4pIHtcbiAgICBjb25zdCByZXN1bHQgPSBydW4oKVxuICAgIGlmIChyZXN1bHQgPT09IFJVTk5JTkcpIHJldHVybiBSVU5OSU5HXG4gICAgcmV0dXJuIHJlc3VsdCA9PT0gU1VDQ0VTUyA/IEZBSUxVUkUgOiBTVUNDRVNTXG4gIH1cbn1cbiIsImltcG9ydCB7IEZBSUxVUkUgfSBmcm9tICcuLi9jb25zdGFudHMnXG5pbXBvcnQgRGVjb3JhdG9yIGZyb20gJy4uL0RlY29yYXRvcidcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9vcERlY29yYXRvciBleHRlbmRzIERlY29yYXRvciB7XG4gIG5vZGVUeXBlID0gJ0xvb3BEZWNvcmF0b3InXG5cbiAgc2V0Q29uZmlnKHsgbG9vcCA9IEluZmluaXR5IH0pIHtcbiAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgIGxvb3BcbiAgICB9XG4gIH1cblxuICBkZWNvcmF0ZShydW4pIHtcbiAgICBsZXQgaSA9IDBcbiAgICBsZXQgcmVzdWx0ID0gRkFJTFVSRVxuICAgIHdoaWxlIChpKysgPCB0aGlzLmNvbmZpZy5sb29wKSB7XG4gICAgICByZXN1bHQgPSBydW4oKVxuICAgICAgaWYgKHJlc3VsdCA9PT0gRkFJTFVSRSkgcmV0dXJuIEZBSUxVUkVcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG59XG4iLCJpbXBvcnQgeyBSVU5OSU5HIH0gZnJvbSAnLi9jb25zdGFudHMnXG5pbXBvcnQgTm9kZSBmcm9tICcuL05vZGUnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJyYW5jaE5vZGUgZXh0ZW5kcyBOb2RlIHtcbiAgbm9kZVR5cGUgPSAnQnJhbmNoTm9kZSdcblxuICBjb25zdHJ1Y3RvcihibHVlcHJpbnQpIHtcbiAgICBzdXBlcihibHVlcHJpbnQpXG5cbiAgICB0aGlzLm51bU5vZGVzID0gYmx1ZXByaW50Lm5vZGVzLmxlbmd0aFxuICAgIHRoaXMud2FzUnVubmluZyA9IGZhbHNlXG4gIH1cblxuICBydW4oYmxhY2tib2FyZCA9IG51bGwsIHsgaW5kZXhlcyA9IFtdLCBpbnRyb3NwZWN0b3IsIHJlcnVuLCByZWdpc3RyeUxvb2tVcCA9ICh4KSA9PiB4IH0gPSB7fSkge1xuICAgIGlmICghcmVydW4pIHRoaXMuYmx1ZXByaW50LnN0YXJ0KGJsYWNrYm9hcmQpXG4gICAgbGV0IG92ZXJhbGxSZXN1bHQgPSB0aGlzLlNUQVJUX0NBU0VcbiAgICBsZXQgY3VycmVudEluZGV4ID0gaW5kZXhlcy5zaGlmdCgpIHx8IDBcbiAgICB3aGlsZSAoY3VycmVudEluZGV4IDwgdGhpcy5udW1Ob2Rlcykge1xuICAgICAgY29uc3Qgbm9kZSA9IHJlZ2lzdHJ5TG9va1VwKHRoaXMuYmx1ZXByaW50Lm5vZGVzW2N1cnJlbnRJbmRleF0pXG4gICAgICBjb25zdCByZXN1bHQgPSBub2RlLnJ1bihibGFja2JvYXJkLCB7IGluZGV4ZXMsIGludHJvc3BlY3RvciwgcmVydW4sIHJlZ2lzdHJ5TG9va1VwIH0pXG4gICAgICBpZiAocmVzdWx0ID09PSBSVU5OSU5HKSB7XG4gICAgICAgIHRoaXMud2FzUnVubmluZyA9IHRydWVcbiAgICAgICAgb3ZlcmFsbFJlc3VsdCA9IFtjdXJyZW50SW5kZXgsIC4uLmluZGV4ZXNdXG4gICAgICAgIGJyZWFrXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZXN1bHQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIGFycmF5XG4gICAgICAgIG92ZXJhbGxSZXN1bHQgPSBbLi4uaW5kZXhlcywgY3VycmVudEluZGV4LCAuLi5yZXN1bHRdXG4gICAgICAgIGJyZWFrXG4gICAgICB9IGVsc2UgaWYgKHJlc3VsdCA9PT0gdGhpcy5PUFRfT1VUX0NBU0UpIHtcbiAgICAgICAgb3ZlcmFsbFJlc3VsdCA9IHJlc3VsdFxuICAgICAgICBicmVha1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy53YXNSdW5uaW5nID0gZmFsc2VcbiAgICAgICAgcmVydW4gPSBmYWxzZVxuICAgICAgICArK2N1cnJlbnRJbmRleFxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBpc1J1bm5pbmcgPSBvdmVyYWxsUmVzdWx0ID09PSBSVU5OSU5HIHx8IHR5cGVvZiBvdmVyYWxsUmVzdWx0ID09PSAnb2JqZWN0J1xuICAgIGlmICghaXNSdW5uaW5nKSB7XG4gICAgICB0aGlzLmJsdWVwcmludC5lbmQoYmxhY2tib2FyZClcbiAgICB9XG4gICAgaWYgKGludHJvc3BlY3Rvcikge1xuICAgICAgY29uc3QgZGVidWdSZXN1bHQgPSBpc1J1bm5pbmcgPyBSVU5OSU5HIDogb3ZlcmFsbFJlc3VsdFxuICAgICAgaW50cm9zcGVjdG9yLndyYXBMYXN0KE1hdGgubWluKGN1cnJlbnRJbmRleCArIDEsIHRoaXMubnVtTm9kZXMpLCB0aGlzLCBkZWJ1Z1Jlc3VsdCwgYmxhY2tib2FyZClcbiAgICB9XG4gICAgcmV0dXJuIG92ZXJhbGxSZXN1bHRcbiAgfVxufVxuIiwiaW1wb3J0IHsgUlVOTklORyB9IGZyb20gJy4vY29uc3RhbnRzJ1xuaW1wb3J0IEJyYW5jaE5vZGUgZnJvbSAnLi9CcmFuY2hOb2RlJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSYW5kb20gZXh0ZW5kcyBCcmFuY2hOb2RlIHtcbiAgbm9kZVR5cGUgPSAnUmFuZG9tJ1xuXG4gIHJ1bihibGFja2JvYXJkID0gbnVsbCwgeyBpbmRleGVzID0gW10sIGludHJvc3BlY3RvciwgcmVydW4sIHJlZ2lzdHJ5TG9va1VwID0gKHgpID0+IHggfSA9IHt9KSB7XG4gICAgaWYgKCFyZXJ1bikgdGhpcy5ibHVlcHJpbnQuc3RhcnQoYmxhY2tib2FyZClcbiAgICBsZXQgY3VycmVudEluZGV4ID0gaW5kZXhlcy5zaGlmdCgpIHx8IDBcbiAgICBpZiAoIXJlcnVuKSB7XG4gICAgICBjdXJyZW50SW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLm51bU5vZGVzKVxuICAgIH1cbiAgICBjb25zdCBub2RlID0gcmVnaXN0cnlMb29rVXAodGhpcy5ibHVlcHJpbnQubm9kZXNbY3VycmVudEluZGV4XSlcbiAgICBjb25zdCByZXN1bHQgPSBub2RlLnJ1bihibGFja2JvYXJkLCB7IGluZGV4ZXMsIGludHJvc3BlY3RvciwgcmVydW4sIHJlZ2lzdHJ5TG9va1VwIH0pXG4gICAgbGV0IG92ZXJhbGxSZXN1bHQgPSByZXN1bHRcbiAgICBpZiAocmVzdWx0ID09PSBSVU5OSU5HKSB7XG4gICAgICBvdmVyYWxsUmVzdWx0ID0gW2N1cnJlbnRJbmRleCwgLi4uaW5kZXhlc11cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiByZXN1bHQgPT09ICdvYmplY3QnKSB7XG4gICAgICAvLyBhcnJheVxuICAgICAgb3ZlcmFsbFJlc3VsdCA9IFsuLi5pbmRleGVzLCBjdXJyZW50SW5kZXgsIC4uLnJlc3VsdF1cbiAgICB9XG4gICAgY29uc3QgaXNSdW5uaW5nID0gb3ZlcmFsbFJlc3VsdCA9PT0gUlVOTklORyB8fCB0eXBlb2Ygb3ZlcmFsbFJlc3VsdCA9PT0gJ29iamVjdCdcbiAgICBpZiAoIWlzUnVubmluZykge1xuICAgICAgdGhpcy5ibHVlcHJpbnQuZW5kKGJsYWNrYm9hcmQpXG4gICAgfVxuICAgIGlmIChpbnRyb3NwZWN0b3IpIHtcbiAgICAgIGNvbnN0IGRlYnVnUmVzdWx0ID0gaXNSdW5uaW5nID8gUlVOTklORyA6IG92ZXJhbGxSZXN1bHRcbiAgICAgIGludHJvc3BlY3Rvci53cmFwTGFzdCgxLCB0aGlzLCBkZWJ1Z1Jlc3VsdCwgYmxhY2tib2FyZClcbiAgICB9XG4gICAgcmV0dXJuIG92ZXJhbGxSZXN1bHRcbiAgfVxufVxuIiwiaW1wb3J0IHsgU1VDQ0VTUywgRkFJTFVSRSB9IGZyb20gJy4vY29uc3RhbnRzJ1xuaW1wb3J0IEJyYW5jaE5vZGUgZnJvbSAnLi9CcmFuY2hOb2RlJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWxlY3RvciBleHRlbmRzIEJyYW5jaE5vZGUge1xuICBub2RlVHlwZSA9ICdTZWxlY3RvcidcbiAgU1RBUlRfQ0FTRSA9IEZBSUxVUkVcbiAgT1BUX09VVF9DQVNFID0gU1VDQ0VTU1xufVxuIiwiaW1wb3J0IHsgU1VDQ0VTUywgRkFJTFVSRSB9IGZyb20gJy4vY29uc3RhbnRzJ1xuaW1wb3J0IEJyYW5jaE5vZGUgZnJvbSAnLi9CcmFuY2hOb2RlJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXF1ZW5jZSBleHRlbmRzIEJyYW5jaE5vZGUge1xuICBub2RlVHlwZSA9ICdTZXF1ZW5jZSdcbiAgU1RBUlRfQ0FTRSA9IFNVQ0NFU1NcbiAgT1BUX09VVF9DQVNFID0gRkFJTFVSRVxufVxuIiwiaW1wb3J0IERlY29yYXRvciBmcm9tICcuL0RlY29yYXRvcidcbmltcG9ydCBSYW5kb20gZnJvbSAnLi9SYW5kb20nXG5pbXBvcnQgU2VsZWN0b3IgZnJvbSAnLi9TZWxlY3RvcidcbmltcG9ydCBTZXF1ZW5jZSBmcm9tICcuL1NlcXVlbmNlJ1xuaW1wb3J0IFRhc2sgZnJvbSAnLi9UYXNrJ1xuaW1wb3J0IEFsd2F5c0ZhaWxEZWNvcmF0b3IgZnJvbSAnLi9kZWNvcmF0b3JzL0Fsd2F5c0ZhaWxEZWNvcmF0b3InXG5pbXBvcnQgQWx3YXlzU3VjY2VlZERlY29yYXRvciBmcm9tICcuL2RlY29yYXRvcnMvQWx3YXlzU3VjY2VlZERlY29yYXRvcidcbmltcG9ydCBDb29sZG93bkRlY29yYXRvciBmcm9tICcuL2RlY29yYXRvcnMvQ29vbGRvd25EZWNvcmF0b3InXG5pbXBvcnQgSW52ZXJ0RGVjb3JhdG9yIGZyb20gJy4vZGVjb3JhdG9ycy9JbnZlcnREZWNvcmF0b3InXG5pbXBvcnQgTG9vcERlY29yYXRvciBmcm9tICcuL2RlY29yYXRvcnMvTG9vcERlY29yYXRvcidcbmltcG9ydCB7IHJlZ2lzdHJ5TG9va1VwIH0gZnJvbSAnLi9CZWhhdmlvclRyZWUnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJlaGF2aW9yVHJlZUltcG9ydGVyIHtcbiAgdHlwZXMgPSB7XG4gICAgdGFzazogVGFzayxcbiAgICBkZWNvcmF0b3I6IERlY29yYXRvcixcbiAgICBzZWxlY3RvcjogU2VsZWN0b3IsXG4gICAgc2VxdWVuY2U6IFNlcXVlbmNlLFxuICAgIHJhbmRvbTogUmFuZG9tLFxuICAgIGludmVydDogSW52ZXJ0RGVjb3JhdG9yLFxuICAgIGZhaWw6IEFsd2F5c0ZhaWxEZWNvcmF0b3IsXG4gICAgc3VjY2VlZDogQWx3YXlzU3VjY2VlZERlY29yYXRvcixcbiAgICBjb29sZG93bjogQ29vbGRvd25EZWNvcmF0b3IsXG4gICAgbG9vcDogTG9vcERlY29yYXRvclxuICB9XG5cbiAgZGVmaW5lVHlwZSh0eXBlLCBLbGFzcykge1xuICAgIHRoaXMudHlwZXNbdHlwZV0gPSBLbGFzc1xuICB9XG5cbiAgcGFyc2UoanNvbikge1xuICAgIGNvbnN0IHsgdHlwZSwgbmFtZSwgbm9kZSwgbm9kZXMsIC4uLmNvbmZpZyB9ID0ganNvblxuICAgIGNvbnN0IEtsYXNzID0gdGhpcy50eXBlc1t0eXBlXVxuICAgIGlmICghS2xhc3MpIHtcbiAgICAgIGNvbnN0IHJlZ2lzdGVyZWROb2RlID0gcmVnaXN0cnlMb29rVXAodHlwZSlcbiAgICAgIGlmIChyZWdpc3RlcmVkTm9kZSkge1xuICAgICAgICByZWdpc3RlcmVkTm9kZS5uYW1lID0gbmFtZVxuICAgICAgICByZXR1cm4gcmVnaXN0ZXJlZE5vZGVcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBFcnJvcihgRG9uJ3Qga25vdyBob3cgdG8gaGFuZGxlIHR5cGUgJHt0eXBlfS4gUGxlYXNlIHJlZ2lzdGVyIHRoaXMgZmlyc3QuYClcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IEtsYXNzKHtcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBub2RlOiBub2RlID8gdGhpcy5wYXJzZShub2RlKSA6IG51bGwsXG4gICAgICBub2Rlczogbm9kZXMgPyBub2Rlcy5tYXAoKHN1Ykpzb24pID0+IHRoaXMucGFyc2Uoc3ViSnNvbikpIDogbnVsbCxcbiAgICAgIGNvbmZpZ1xuICAgIH0pXG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEludHJvc3BlY3RvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucmVzdWx0cyA9IFtdXG4gIH1cblxuICBzdGFydCh0cmVlKSB7XG4gICAgdGhpcy50cmVlID0gdHJlZVxuICAgIHRoaXMuY3VycmVudFJlc3VsdCA9IFtdXG4gIH1cblxuICBlbmQoKSB7XG4gICAgdGhpcy5yZXN1bHRzLnB1c2godGhpcy5jdXJyZW50UmVzdWx0LnBvcCgpKVxuICAgIGRlbGV0ZSB0aGlzLnRyZWVcbiAgICBkZWxldGUgdGhpcy5jdXJyZW50UmVzdWx0XG4gIH1cblxuICBwdXNoKG5vZGUsIHJlc3VsdCwgYmxhY2tib2FyZCkge1xuICAgIHRoaXMuY3VycmVudFJlc3VsdC5wdXNoKHRoaXMuX3RvUmVzdWx0KG5vZGUsIHJlc3VsdCwgYmxhY2tib2FyZCkpXG4gIH1cblxuICB3cmFwTGFzdChudW1SZXN1bHRzLCBub2RlLCByZXN1bHQsIGJsYWNrYm9hcmQpIHtcbiAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuY3VycmVudFJlc3VsdC5zcGxpY2UodGhpcy5jdXJyZW50UmVzdWx0Lmxlbmd0aCAtIG51bVJlc3VsdHMsIG51bVJlc3VsdHMpXG4gICAgdGhpcy5jdXJyZW50UmVzdWx0LnB1c2goeyAuLi50aGlzLl90b1Jlc3VsdChub2RlLCByZXN1bHQsIGJsYWNrYm9hcmQpLCBjaGlsZHJlbiB9KVxuICB9XG5cbiAgX3RvUmVzdWx0KG5vZGUsIHJlc3VsdCkge1xuICAgIHJldHVybiB7IC4uLihub2RlLm5hbWUgPyB7IG5hbWU6IG5vZGUubmFtZSB9IDoge30pLCByZXN1bHQgfVxuICB9XG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5yZXN1bHRzID0gW11cbiAgfVxuXG4gIGdldCBsYXN0UmVzdWx0KCkge1xuICAgIGlmICh0aGlzLnJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5yZXN1bHRzW3RoaXMucmVzdWx0cy5sZW5ndGggLSAxXVxuICB9XG59XG4iLCJpbXBvcnQgQmVoYXZpb3JUcmVlLCB7IGdldFJlZ2lzdHJ5LCByZWdpc3RyeUxvb2tVcCB9IGZyb20gJy4vQmVoYXZpb3JUcmVlJ1xuaW1wb3J0ICogYXMgZGVjb3JhdG9ycyBmcm9tICcuL2RlY29yYXRvcnMnXG5cbmltcG9ydCBCZWhhdmlvclRyZWVJbXBvcnRlciBmcm9tICcuL0JlaGF2aW9yVHJlZUltcG9ydGVyJ1xuXG5pbXBvcnQgQnJhbmNoTm9kZSBmcm9tICcuL0JyYW5jaE5vZGUnXG5pbXBvcnQgTm9kZSBmcm9tICcuL05vZGUnXG5pbXBvcnQgU2VsZWN0b3IgZnJvbSAnLi9TZWxlY3RvcidcbmltcG9ydCBTZXF1ZW5jZSBmcm9tICcuL1NlcXVlbmNlJ1xuaW1wb3J0IFJhbmRvbSBmcm9tICcuL1JhbmRvbSdcbmltcG9ydCBEZWNvcmF0b3IgZnJvbSAnLi9EZWNvcmF0b3InXG5pbXBvcnQgVGFzayBmcm9tICcuL1Rhc2snXG5pbXBvcnQgSW50cm9zcGVjdG9yIGZyb20gJy4vSW50cm9zcGVjdG9yJ1xuXG5pbXBvcnQgeyBTVUNDRVNTLCBGQUlMVVJFLCBSVU5OSU5HIH0gZnJvbSAnLi9jb25zdGFudHMnXG5cbmV4cG9ydCBkZWZhdWx0IEJlaGF2aW9yVHJlZVxuXG5leHBvcnQge1xuICBCZWhhdmlvclRyZWUsXG4gIFNVQ0NFU1MsXG4gIEZBSUxVUkUsXG4gIFJVTk5JTkcsXG4gIGdldFJlZ2lzdHJ5LFxuICByZWdpc3RyeUxvb2tVcCxcbiAgQmVoYXZpb3JUcmVlSW1wb3J0ZXIsXG4gIEJyYW5jaE5vZGUsXG4gIE5vZGUsXG4gIFNlbGVjdG9yLFxuICBTZXF1ZW5jZSxcbiAgUmFuZG9tLFxuICBEZWNvcmF0b3IsXG4gIFRhc2ssXG4gIEludHJvc3BlY3RvcixcbiAgZGVjb3JhdG9yc1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==