(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{BehaviorTree:()=>R,BehaviorTreeImporter:()=>ye,BranchNode:()=>Nt,Decorator:()=>N,FAILURE:()=>u,Introspector:()=>de,Node:()=>p,RUNNING:()=>n,Random:()=>Vt,SUCCESS:()=>o,Selector:()=>ne,Sequence:()=>se,Task:()=>g,decorators:()=>r,default:()=>me,getRegistry:()=>S,registryLookUp:()=>_});var r={};t.r(r),t.d(r,{AlwaysFailDecorator:()=>K,AlwaysSucceedDecorator:()=>rt,CooldownDecorator:()=>st,InvertDecorator:()=>gt,LoopDecorator:()=>Et});var n=Symbol("running"),o=!0,u=!1;function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},u=Object.keys(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s=function(){},p=function(){function t(e){var r=e.run,n=void 0===r?s:r,o=e.start,u=void 0===o?s:o,c=e.end,a=void 0===c?s:c,p=f(e,["run","start","end"]);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,"nodeType","Node"),this.blueprint=i({run:n,start:u,end:a},p)}var e,r;return e=t,(r=[{key:"run",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.introspector,o=e.rerun,u=void 0!==o&&o,c=e.registryLookUp,a=void 0===c?function(t){return t}:c,l=f(e,["introspector","rerun","registryLookUp"]);u||this.blueprint.start(t);var s=this.blueprint.run(t,i(i({},l),{},{rerun:u,registryLookUp:a}));return s!==n&&this.blueprint.end(t),r&&r.push(this,s,t),s}},{key:"name",get:function(){return this._name||this.blueprint.name},set:function(t){this._name=t}}])&&a(e.prototype,r),t}();function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?O(t):e}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(o,t);var e,r,n=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=d(e);if(r){var o=d(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return v(this,t)});function o(){var t;b(this,o);for(var e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return m(O(t=n.call.apply(n,[this].concat(r))),"nodeType","Task"),t}return o}(p);function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var P={};function S(){return P}function _(t){if("string"==typeof t){var e=P[t];if(!e)throw new Error("No node with name ".concat(t," registered."));return e}return t}var R=function(){function t(e){var r=e.tree,n=e.blackboard;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tree=r,this.blackboard=n,this.lastResult=null}var e,r,o;return e=t,o=[{key:"register",value:function(t,e){P[t]="function"==typeof e?new g({name:t,run:e}):e}},{key:"cleanRegistry",value:function(){P={}}}],(r=[{key:"step",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.introspector,r=this.lastResult&&"object"===w(this.lastResult)?this.lastResult:[],o=this.lastResult===n||r.length>0;e&&e.start(this),this.lastResult=_(this.tree).run(this.blackboard,{indexes:r,introspector:e,rerun:o,registryLookUp:_}),e&&e.end()}}])&&j(e.prototype,r),o&&j(e,o),t}();function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function E(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?T(Object(r),!0).forEach((function(e){I(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function A(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},u=Object.keys(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function B(t,e){return(B=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?U(t):e}function U(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&B(t,e)}(i,t);var e,r,o,u,c=(o=i,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=L(o);if(u){var r=L(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return D(this,t)});function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.config,n=void 0===r?{}:r,o=A(e,["config"]);return x(this,i),I(U(t=c.call(this,o)),"nodeType","Decorator"),t.setConfig(n),t}return e=i,(r=[{key:"decorate",value:function(t){return t()}},{key:"run",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.introspector,u=r.rerun,c=r.registryLookUp,i=void 0===c?function(t){return t}:c,f=A(r,["introspector","rerun","registryLookUp"]);u||this.blueprint.start(t);var a=0,l=this.decorate((function(){return++a,i(e.blueprint.node).run(t,E(E({},f),{},{rerun:u,introspector:o,registryLookUp:i}))}),t,this.config);return l!==n&&this.blueprint.end(t),o&&o.wrapLast(a,this,l,t),l}},{key:"setConfig",value:function(t){this.config=t}}])&&C(e.prototype,r),i}(p);function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $(t,e){return($=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function G(t,e){return!e||"object"!==M(e)&&"function"!=typeof e?z(t):e}function z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function J(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$(t,e)}(f,t);var e,r,o,c,i=(o=f,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=H(o);if(c){var r=H(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return G(this,t)});function f(){var t;q(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return J(z(t=i.call.apply(i,[this].concat(r))),"nodeType","AlwaysFailDecorator"),t}return e=f,(r=[{key:"decorate",value:function(t){return t()===n?n:u}}])&&F(e.prototype,r),f}(N);function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function X(t,e){return(X=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Y(t,e){return!e||"object"!==Q(e)&&"function"!=typeof e?Z(t):e}function Z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function et(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var rt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&X(t,e)}(f,t);var e,r,u,c,i=(u=f,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=tt(u);if(c){var r=tt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return Y(this,t)});function f(){var t;V(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return et(Z(t=i.call.apply(i,[this].concat(r))),"nodeType","AlwaysSucceedDecorator"),t}return e=f,(r=[{key:"decorate",value:function(t){return t()===n?n:o}}])&&W(e.prototype,r),f}(N);function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ct(t,e){return(ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function it(t,e){return!e||"object"!==nt(e)&&"function"!=typeof e?ft(t):e}function ft(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function at(t){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var st=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ct(t,e)}(i,t);var e,r,n,o,c=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=at(n);if(o){var r=at(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return it(this,t)});function i(){var t;ot(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return lt(ft(t=c.call.apply(c,[this].concat(r))),"nodeType","CooldownDecorator"),t}return e=i,(r=[{key:"setConfig",value:function(t){var e=t.cooldown,r=void 0===e?5:e;this.config={cooldown:r}}},{key:"decorate",value:function(t){var e=this;return this.lock?u:(this.lock=!0,setTimeout((function(){e.lock=!1}),1e3*this.config.cooldown),t())}}])&&ut(e.prototype,r),i}(N);function pt(t){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ht(t,e){return(ht=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vt(t,e){return!e||"object"!==pt(e)&&"function"!=typeof e?Ot(t):e}function Ot(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dt(t){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ht(t,e)}(a,t);var e,r,c,i,f=(c=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=dt(c);if(i){var r=dt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return vt(this,t)});function a(){var t;yt(this,a);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return mt(Ot(t=f.call.apply(f,[this].concat(r))),"nodeType","InvertDecorator"),t}return e=a,(r=[{key:"decorate",value:function(t){var e=t();return e===n?n:e===o?u:o}}])&&bt(e.prototype,r),a}(N);function wt(t){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _t(t,e){return!e||"object"!==wt(e)&&"function"!=typeof e?Rt(t):e}function Rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&St(t,e)}(i,t);var e,r,n,o,c=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=kt(n);if(o){var r=kt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return _t(this,t)});function i(){var t;jt(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Tt(Rt(t=c.call.apply(c,[this].concat(r))),"nodeType","LoopDecorator"),t}return e=i,(r=[{key:"setConfig",value:function(t){var e=t.loop,r=void 0===e?1/0:e;this.config={loop:r}}},{key:"decorate",value:function(t){for(var e=0,r=u;e++<this.config.loop;)if((r=t())===u)return u;return r}}])&&Pt(e.prototype,r),i}(N);function At(t){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xt(t){return function(t){if(Array.isArray(t))return Ct(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ct(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ct(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Bt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Dt(t,e){return(Dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ut(t,e){return!e||"object"!==At(e)&&"function"!=typeof e?Lt(t):e}function Lt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function It(t){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dt(t,e)}(i,t);var e,r,o,u,c=(o=i,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=It(o);if(u){var r=It(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return Ut(this,t)});function i(t){var e,r,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o="BranchNode",(n="nodeType")in(r=Lt(e=c.call(this,t)))?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,e.numNodes=t.nodes.length,e.wasRunning=!1,e}return e=i,(r=[{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.indexes,o=void 0===r?[]:r,u=e.introspector,c=e.rerun,i=e.registryLookUp,f=void 0===i?function(t){return t}:i;c||this.blueprint.start(t);for(var a=this.START_CASE,l=o.shift()||0;l<this.numNodes;){var s=f(this.blueprint.nodes[l]),p=s.run(t,{indexes:o,introspector:u,rerun:c,registryLookUp:f});if(p===n){this.wasRunning=!0,a=[l].concat(xt(o));break}if("object"===At(p)){a=[].concat(xt(o),[l],xt(p));break}if(p===this.OPT_OUT_CASE){a=p;break}this.wasRunning=!1,c=!1,++l}var y=a===n||"object"===At(a);if(y||this.blueprint.end(t),u){var b=y?n:a;u.wrapLast(Math.min(l+1,this.numNodes),this,b,t)}return a}}])&&Bt(e.prototype,r),i}(p);function Mt(t){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qt(t){return function(t){if(Array.isArray(t))return Ft(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ft(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ft(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zt(t,e){return(zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ht(t,e){return!e||"object"!==Mt(e)&&"function"!=typeof e?Jt(t):e}function Jt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kt(t){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Vt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zt(t,e)}(i,t);var e,r,o,u,c=(o=i,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Kt(o);if(u){var r=Kt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return Ht(this,t)});function i(){var t;$t(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Qt(Jt(t=c.call.apply(c,[this].concat(r))),"nodeType","Random"),t}return e=i,(r=[{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.indexes,o=void 0===r?[]:r,u=e.introspector,c=e.rerun,i=e.registryLookUp,f=void 0===i?function(t){return t}:i;c||this.blueprint.start(t);var a=o.shift()||0;c||(a=Math.floor(Math.random()*this.numNodes));var l=f(this.blueprint.nodes[a]),s=l.run(t,{indexes:o,introspector:u,rerun:c,registryLookUp:f}),p=s;s===n?p=[a].concat(qt(o)):"object"===Mt(s)&&(p=[].concat(qt(o),[a],qt(s)));var y=p===n||"object"===Mt(p);if(y||this.blueprint.end(t),u){var b=y?n:p;u.wrapLast(1,this,b,t)}return p}}])&&Gt(e.prototype,r),i}(Nt);function Wt(t){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yt(t,e){return(Yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zt(t,e){return!e||"object"!==Wt(e)&&"function"!=typeof e?te(t):e}function te(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ee(t){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function re(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ne=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yt(t,e)}(c,t);var e,r,n=(e=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=ee(e);if(r){var o=ee(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return Zt(this,t)});function c(){var t;Xt(this,c);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return re(te(t=n.call.apply(n,[this].concat(r))),"nodeType","Selector"),re(te(t),"START_CASE",u),re(te(t),"OPT_OUT_CASE",o),t}return c}(Nt);function oe(t){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ce(t,e){return(ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ie(t,e){return!e||"object"!==oe(e)&&"function"!=typeof e?fe(t):e}function fe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ae(t){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function le(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ce(t,e)}(c,t);var e,r,n=(e=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=ae(e);if(r){var o=ae(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return ie(this,t)});function c(){var t;ue(this,c);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return le(fe(t=n.call.apply(n,[this].concat(r))),"nodeType","Sequence"),le(fe(t),"START_CASE",o),le(fe(t),"OPT_OUT_CASE",u),t}return c}(Nt);function pe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ye=function(){function t(){var e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r={task:g,decorator:N,selector:ne,sequence:se,random:Vt,invert:gt,fail:K,succeed:rt,cooldown:st,loop:Et},(e="types")in this?Object.defineProperty(this,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[e]=r}var e,r;return e=t,(r=[{key:"defineType",value:function(t,e){this.types[t]=e}},{key:"parse",value:function(t){var e=this,r=t.type,n=t.name,o=t.node,u=t.nodes,c=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},u=Object.keys(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,["type","name","node","nodes"]),i=this.types[r];if(!i){var f=_(r);if(f)return f.name=n,f;throw new Error("Don't know how to handle type ".concat(r,". Please register this first."))}return new i({name:n,node:o?this.parse(o):null,nodes:u?u.map((function(t){return e.parse(t)})):null,config:c})}}])&&pe(e.prototype,r),t}();function be(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function he(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?be(Object(r),!0).forEach((function(e){ve(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ve(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var de=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.results=[]}var e,r;return e=t,(r=[{key:"start",value:function(t){this.tree=t,this.currentResult=[]}},{key:"end",value:function(){this.results.push(this.currentResult.pop()),delete this.tree,delete this.currentResult}},{key:"push",value:function(t,e,r){this.currentResult.push(this._toResult(t,e,r))}},{key:"wrapLast",value:function(t,e,r,n){var o=this.currentResult.splice(this.currentResult.length-t,t);this.currentResult.push(he(he({},this._toResult(e,r,n)),{},{children:o}))}},{key:"_toResult",value:function(t,e){return he(he({},t.name?{name:t.name}:{}),{},{result:e})}},{key:"reset",value:function(){this.results=[]}},{key:"lastResult",get:function(){return 0===this.results.length?null:this.results[this.results.length-1]}}])&&Oe(e.prototype,r),t}();const me=R;var ge=exports;for(var we in e)ge[we]=e[we];e.__esModule&&Object.defineProperty(ge,"__esModule",{value:!0})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYmVoYXZpb3J0cmVlL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvLi9zcmMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL2JlaGF2aW9ydHJlZS8uL3NyYy9Ob2RlLmpzIiwid2VicGFjazovL2JlaGF2aW9ydHJlZS8uL3NyYy9UYXNrLmpzIiwid2VicGFjazovL2JlaGF2aW9ydHJlZS8uL3NyYy9CZWhhdmlvclRyZWUuanMiLCJ3ZWJwYWNrOi8vYmVoYXZpb3J0cmVlLy4vc3JjL0RlY29yYXRvci5qcyIsIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvLi9zcmMvZGVjb3JhdG9ycy9BbHdheXNGYWlsRGVjb3JhdG9yLmpzIiwid2VicGFjazovL2JlaGF2aW9ydHJlZS8uL3NyYy9kZWNvcmF0b3JzL0Fsd2F5c1N1Y2NlZWREZWNvcmF0b3IuanMiLCJ3ZWJwYWNrOi8vYmVoYXZpb3J0cmVlLy4vc3JjL2RlY29yYXRvcnMvQ29vbGRvd25EZWNvcmF0b3IuanMiLCJ3ZWJwYWNrOi8vYmVoYXZpb3J0cmVlLy4vc3JjL2RlY29yYXRvcnMvSW52ZXJ0RGVjb3JhdG9yLmpzIiwid2VicGFjazovL2JlaGF2aW9ydHJlZS8uL3NyYy9kZWNvcmF0b3JzL0xvb3BEZWNvcmF0b3IuanMiLCJ3ZWJwYWNrOi8vYmVoYXZpb3J0cmVlLy4vc3JjL0JyYW5jaE5vZGUuanMiLCJ3ZWJwYWNrOi8vYmVoYXZpb3J0cmVlLy4vc3JjL1JhbmRvbS5qcyIsIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvLi9zcmMvU2VsZWN0b3IuanMiLCJ3ZWJwYWNrOi8vYmVoYXZpb3J0cmVlLy4vc3JjL1NlcXVlbmNlLmpzIiwid2VicGFjazovL2JlaGF2aW9ydHJlZS8uL3NyYy9CZWhhdmlvclRyZWVJbXBvcnRlci5qcyIsIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvLi9zcmMvSW50cm9zcGVjdG9yLmpzIiwid2VicGFjazovL2JlaGF2aW9ydHJlZS8uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJSVU5OSU5HIiwiU1VDQ0VTUyIsIkZBSUxVUkUiLCJOT09QIiwiTm9kZSIsInJ1biIsInN0YXJ0IiwiZW5kIiwicHJvcHMiLCJ0aGlzIiwiYmx1ZXByaW50IiwiYmxhY2tib2FyZCIsImludHJvc3BlY3RvciIsInJlcnVuIiwicmVnaXN0cnlMb29rVXAiLCJ4IiwiY29uZmlnIiwicmVzdWx0IiwicHVzaCIsIl9uYW1lIiwibmFtZSIsIlRhc2siLCJyZWdpc3RyeSIsImdldFJlZ2lzdHJ5Iiwibm9kZSIsImxvb2tlZFVwTm9kZSIsIkVycm9yIiwiQmVoYXZpb3JUcmVlIiwidHJlZSIsImxhc3RSZXN1bHQiLCJpbmRleGVzIiwibGVuZ3RoIiwiRGVjb3JhdG9yIiwic2V0Q29uZmlnIiwicnVuQ291bnQiLCJkZWNvcmF0ZSIsIndyYXBMYXN0IiwiQWx3YXlzRmFpbERlY29yYXRvciIsIkFsd2F5c1N1Y2NlZWREZWNvcmF0b3IiLCJDb29sZG93bkRlY29yYXRvciIsImNvb2xkb3duIiwibG9jayIsInNldFRpbWVvdXQiLCJJbnZlcnREZWNvcmF0b3IiLCJMb29wRGVjb3JhdG9yIiwibG9vcCIsIkluZmluaXR5IiwiaSIsIkJyYW5jaE5vZGUiLCJudW1Ob2RlcyIsIm5vZGVzIiwid2FzUnVubmluZyIsIm92ZXJhbGxSZXN1bHQiLCJTVEFSVF9DQVNFIiwiY3VycmVudEluZGV4Iiwic2hpZnQiLCJPUFRfT1VUX0NBU0UiLCJpc1J1bm5pbmciLCJkZWJ1Z1Jlc3VsdCIsIk1hdGgiLCJtaW4iLCJSYW5kb20iLCJmbG9vciIsInJhbmRvbSIsIlNlbGVjdG9yIiwiU2VxdWVuY2UiLCJCZWhhdmlvclRyZWVJbXBvcnRlciIsInRhc2siLCJkZWNvcmF0b3IiLCJzZWxlY3RvciIsInNlcXVlbmNlIiwiaW52ZXJ0IiwiZmFpbCIsInN1Y2NlZWQiLCJ0eXBlIiwiS2xhc3MiLCJ0eXBlcyIsImpzb24iLCJyZWdpc3RlcmVkTm9kZSIsInBhcnNlIiwibWFwIiwic3ViSnNvbiIsIkludHJvc3BlY3RvciIsInJlc3VsdHMiLCJjdXJyZW50UmVzdWx0IiwicG9wIiwiX3RvUmVzdWx0IiwibnVtUmVzdWx0cyIsImNoaWxkcmVuIiwic3BsaWNlIl0sIm1hcHBpbmdzIjoibUJBQ0EsSUFBSUEsRUFBc0IsQ0NBMUIsRUFBd0IsQ0FBQ0MsRUFBU0MsS0FDakMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYRixFQUFvQkksRUFBRUYsRUFBWUMsS0FBU0gsRUFBb0JJLEVBQUVILEVBQVNFLElBQzVFRSxPQUFPQyxlQUFlTCxFQUFTRSxFQUFLLENBQUVJLFlBQVksRUFBTUMsSUFBS04sRUFBV0MsTUNKM0UsRUFBd0IsQ0FBQ00sRUFBS0MsSUFBVUwsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NDbEYsRUFBeUJULElBQ0gsb0JBQVhhLFFBQTBCQSxPQUFPQyxhQUMxQ1YsT0FBT0MsZUFBZUwsRUFBU2EsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEWCxPQUFPQyxlQUFlTCxFQUFTLGFBQWMsQ0FBRWUsT0FBTyxNLHFjQ0xoRCxJQUFNQyxFQUFVSCxPQUFPLFdBQ2pCSSxHQUFVLEVBQ1ZDLEdBQVUsRSxpdENDQXZCLElBQU1DLEVB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QUFjckQsT0FBU3dELEVBQVlBLEdBQ25GOUUsS0FBSzJFLGNBQWNsRSxLQUFuQixTQUE2QlQsS0FBSzZFLFVBQVU5RCxFQUFNUCxFQUFRTixJQUExRCxJQUF1RTZFLGdCLHVCQUd6RSxTQUFVaEUsRUFBTVAsR0FDZCxnQkFBYU8sRUFBS0osS0FBTyxDQUFFQSxLQUFNSSxFQUFLSixNQUFTLElBQS9DLElBQW9ESCxhLG1CQUd0RCxXQUNFUixLQUFLMEUsUUFBVSxLLHNCQUdqQixXQUNFLE9BQTRCLElBQXhCMUUsS0FBSzBFLFFBQVFwRCxPQUNSLEtBRUZ0QixLQUFLMEUsUUFBUTFFLEtBQUswRSxRQUFRcEQsT0FBUyxRLHVCQ3JCOUMsVyIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiZXhwb3J0IGNvbnN0IFJVTk5JTkcgPSBTeW1ib2woJ3J1bm5pbmcnKVxuZXhwb3J0IGNvbnN0IFNVQ0NFU1MgPSB0cnVlXG5leHBvcnQgY29uc3QgRkFJTFVSRSA9IGZhbHNlXG4iLCJpbXBvcnQgeyBSVU5OSU5HIH0gZnJvbSAnLi9jb25zdGFudHMnXG5cbmNvbnN0IE5PT1AgPSAoKSA9PiB7fVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb2RlIHtcbiAgbm9kZVR5cGUgPSAnTm9kZSdcblxuICBjb25zdHJ1Y3Rvcih7IHJ1biA9IE5PT1AsIHN0YXJ0ID0gTk9PUCwgZW5kID0gTk9PUCwgLi4ucHJvcHMgfSkge1xuICAgIHRoaXMuYmx1ZXByaW50ID0geyBydW4sIHN0YXJ0LCBlbmQsIC4uLnByb3BzIH1cbiAgfVxuXG4gIHJ1bihibGFja2JvYXJkLCB7IGludHJvc3BlY3RvciwgcmVydW4gPSBmYWxzZSwgcmVnaXN0cnlMb29rVXAgPSAoeCkgPT4geCwgLi4uY29uZmlnIH0gPSB7fSkge1xuICAgIGlmICghcmVydW4pIHRoaXMuYmx1ZXByaW50LnN0YXJ0KGJsYWNrYm9hcmQpXG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5ibHVlcHJpbnQucnVuKGJsYWNrYm9hcmQsIHsgLi4uY29uZmlnLCByZXJ1biwgcmVnaXN0cnlMb29rVXAgfSlcbiAgICBpZiAocmVzdWx0ICE9PSBSVU5OSU5HKSB7XG4gICAgICB0aGlzLmJsdWVwcmludC5lbmQoYmxhY2tib2FyZClcbiAgICB9XG4gICAgaWYgKGludHJvc3BlY3Rvcikge1xuICAgICAgaW50cm9zcGVjdG9yLnB1c2godGhpcywgcmVzdWx0LCBibGFja2JvYXJkKVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBnZXQgbmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fbmFtZSB8fCB0aGlzLmJsdWVwcmludC5uYW1lXG4gIH1cblxuICBzZXQgbmFtZShuYW1lKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWVcbiAgfVxufVxuIiwiaW1wb3J0IE5vZGUgZnJvbSAnLi9Ob2RlJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUYXNrIGV4dGVuZHMgTm9kZSB7XG4gIG5vZGVUeXBlID0gJ1Rhc2snXG59XG4iLCJpbXBvcnQgeyBSVU5OSU5HIH0gZnJvbSAnLi9jb25zdGFudHMnXG5pbXBvcnQgVGFzayBmcm9tICcuL1Rhc2snXG5cbmxldCByZWdpc3RyeSA9IHt9XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWdpc3RyeSgpIHtcbiAgcmV0dXJuIHJlZ2lzdHJ5XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RyeUxvb2tVcChub2RlKSB7XG4gIGlmICh0eXBlb2Ygbm9kZSA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zdCBsb29rZWRVcE5vZGUgPSByZWdpc3RyeVtub2RlXVxuICAgIGlmICghbG9va2VkVXBOb2RlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIG5vZGUgd2l0aCBuYW1lICR7bm9kZX0gcmVnaXN0ZXJlZC5gKVxuICAgIH1cbiAgICByZXR1cm4gbG9va2VkVXBOb2RlXG4gIH1cbiAgcmV0dXJuIG5vZGVcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmVoYXZpb3JUcmVlIHtcbiAgY29uc3RydWN0b3IoeyB0cmVlLCBibGFja2JvYXJkIH0pIHtcbiAgICB0aGlzLnRyZWUgPSB0cmVlXG4gICAgdGhpcy5ibGFja2JvYXJkID0gYmxhY2tib2FyZFxuICAgIHRoaXMubGFzdFJlc3VsdCA9IG51bGxcbiAgfVxuXG4gIHN0ZXAoeyBpbnRyb3NwZWN0b3IgfSA9IHt9KSB7XG4gICAgY29uc3QgaW5kZXhlcyA9IHRoaXMubGFzdFJlc3VsdCAmJiB0eXBlb2YgdGhpcy5sYXN0UmVzdWx0ID09PSAnb2JqZWN0JyA/IHRoaXMubGFzdFJlc3VsdCA6IFtdXG4gICAgY29uc3QgcmVydW4gPSB0aGlzLmxhc3RSZXN1bHQgPT09IFJVTk5JTkcgfHwgaW5kZXhlcy5sZW5ndGggPiAwXG4gICAgaWYgKGludHJvc3BlY3Rvcikge1xuICAgICAgaW50cm9zcGVjdG9yLnN0YXJ0KHRoaXMpXG4gICAgfVxuICAgIHRoaXMubGFzdFJlc3VsdCA9IHJlZ2lzdHJ5TG9va1VwKHRoaXMudHJlZSkucnVuKHRoaXMuYmxhY2tib2FyZCwge1xuICAgICAgaW5kZXhlcyxcbiAgICAgIGludHJvc3BlY3RvcixcbiAgICAgIHJlcnVuLFxuICAgICAgcmVnaXN0cnlMb29rVXBcbiAgICB9KVxuICAgIGlmIChpbnRyb3NwZWN0b3IpIHtcbiAgICAgIGludHJvc3BlY3Rvci5lbmQoKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyByZWdpc3RlcihuYW1lLCBub2RlKSB7XG4gICAgcmVnaXN0cnlbbmFtZV0gPSB0eXBlb2Ygbm9kZSA9PT0gJ2Z1bmN0aW9uJyA/IG5ldyBUYXNrKHsgbmFtZSwgcnVuOiBub2RlIH0pIDogbm9kZVxuICB9XG5cbiAgc3RhdGljIGNsZWFuUmVnaXN0cnkoKSB7XG4gICAgcmVnaXN0cnkgPSB7fVxuICB9XG59XG4iLCJpbXBvcnQgeyBSVU5OSU5HIH0gZnJvbSAnLi9jb25zdGFudHMnXG5pbXBvcnQgTm9kZSBmcm9tICcuL05vZGUnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERlY29yYXRvciBleHRlbmRzIE5vZGUge1xuICBub2RlVHlwZSA9ICdEZWNvcmF0b3InXG5cbiAgY29uc3RydWN0b3IoeyBjb25maWcgPSB7fSwgLi4ucHJvcHMgfSA9IHt9KSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgdGhpcy5zZXRDb25maWcoY29uZmlnKVxuICB9XG5cbiAgZGVjb3JhdGUocnVuKSB7XG4gICAgLy8gVGhpcyBtZXRob2Qgc2hvdWxkIGJlIG92ZXJyaWRkZW4gdG8gbWFrZSBpdCB1c2VmdWxcbiAgICByZXR1cm4gcnVuKClcbiAgfVxuXG4gIHJ1bihibGFja2JvYXJkLCB7IGludHJvc3BlY3RvciwgcmVydW4sIHJlZ2lzdHJ5TG9va1VwID0gKHgpID0+IHgsIC4uLmNvbmZpZyB9ID0ge30pIHtcbiAgICBpZiAoIXJlcnVuKSB0aGlzLmJsdWVwcmludC5zdGFydChibGFja2JvYXJkKVxuICAgIGxldCBydW5Db3VudCA9IDBcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLmRlY29yYXRlKFxuICAgICAgKCkgPT4ge1xuICAgICAgICArK3J1bkNvdW50XG4gICAgICAgIHJldHVybiByZWdpc3RyeUxvb2tVcCh0aGlzLmJsdWVwcmludC5ub2RlKS5ydW4oYmxhY2tib2FyZCwge1xuICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgICByZXJ1bixcbiAgICAgICAgICBpbnRyb3NwZWN0b3IsXG4gICAgICAgICAgcmVnaXN0cnlMb29rVXBcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBibGFja2JvYXJkLFxuICAgICAgdGhpcy5jb25maWdcbiAgICApXG5cbiAgICBpZiAocmVzdWx0ICE9PSBSVU5OSU5HKSB7XG4gICAgICB0aGlzLmJsdWVwcmludC5lbmQoYmxhY2tib2FyZClcbiAgICB9XG4gICAgaWYgKGludHJvc3BlY3Rvcikge1xuICAgICAgaW50cm9zcGVjdG9yLndyYXBMYXN0KHJ1bkNvdW50LCB0aGlzLCByZXN1bHQsIGJsYWNrYm9hcmQpXG4gICAgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIHNldENvbmZpZyhjb25maWcpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZ1xuICB9XG59XG4iLCJpbXBvcnQgeyBSVU5OSU5HLCBGQUlMVVJFIH0gZnJvbSAnLi4vY29uc3RhbnRzJ1xuaW1wb3J0IERlY29yYXRvciBmcm9tICcuLi9EZWNvcmF0b3InXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFsd2F5c0ZhaWxEZWNvcmF0b3IgZXh0ZW5kcyBEZWNvcmF0b3Ige1xuICBub2RlVHlwZSA9ICdBbHdheXNGYWlsRGVjb3JhdG9yJ1xuXG4gIGRlY29yYXRlKHJ1bikge1xuICAgIGNvbnN0IHJlc3VsdCA9IHJ1bigpXG4gICAgaWYgKHJlc3VsdCA9PT0gUlVOTklORykgcmV0dXJuIFJVTk5JTkdcbiAgICByZXR1cm4gRkFJTFVSRVxuICB9XG59XG4iLCJpbXBvcnQgeyBSVU5OSU5HLCBTVUNDRVNTIH0gZnJvbSAnLi4vY29uc3RhbnRzJ1xuaW1wb3J0IERlY29yYXRvciBmcm9tICcuLi9EZWNvcmF0b3InXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFsd2F5c1N1Y2NlZWREZWNvcmF0b3IgZXh0ZW5kcyBEZWNvcmF0b3Ige1xuICBub2RlVHlwZSA9ICdBbHdheXNTdWNjZWVkRGVjb3JhdG9yJ1xuXG4gIGRlY29yYXRlKHJ1bikge1xuICAgIGNvbnN0IHJlc3VsdCA9IHJ1bigpXG4gICAgaWYgKHJlc3VsdCA9PT0gUlVOTklORykgcmV0dXJuIFJVTk5JTkdcbiAgICByZXR1cm4gU1VDQ0VTU1xuICB9XG59XG4iLCJpbXBvcnQgeyBGQUlMVVJFIH0gZnJvbSAnLi4vY29uc3RhbnRzJ1xuaW1wb3J0IERlY29yYXRvciBmcm9tICcuLi9EZWNvcmF0b3InXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvb2xkb3duRGVjb3JhdG9yIGV4dGVuZHMgRGVjb3JhdG9yIHtcbiAgbm9kZVR5cGUgPSAnQ29vbGRvd25EZWNvcmF0b3InXG5cbiAgc2V0Q29uZmlnKHsgY29vbGRvd24gPSA1IH0pIHtcbiAgICB0aGlzLmNvbmZpZyA9IHtcbiAgICAgIGNvb2xkb3duXG4gICAgfVxuICB9XG5cbiAgZGVjb3JhdGUocnVuKSB7XG4gICAgaWYgKHRoaXMubG9jaykge1xuICAgICAgcmV0dXJuIEZBSUxVUkVcbiAgICB9XG4gICAgdGhpcy5sb2NrID0gdHJ1ZVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5sb2NrID0gZmFsc2VcbiAgICB9LCB0aGlzLmNvbmZpZy5jb29sZG93biAqIDEwMDApXG4gICAgcmV0dXJuIHJ1bigpXG4gIH1cbn1cbiIsImltcG9ydCB7IFJVTk5JTkcsIFNVQ0NFU1MsIEZBSUxVUkUgfSBmcm9tICcuLi9jb25zdGFudHMnXG5pbXBvcnQgRGVjb3JhdG9yIGZyb20gJy4uL0RlY29yYXRvcidcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW52ZXJ0RGVjb3JhdG9yIGV4dGVuZHMgRGVjb3JhdG9yIHtcbiAgbm9kZVR5cGUgPSAnSW52ZXJ0RGVjb3JhdG9yJ1xuXG4gIGRlY29yYXRlKHJ1bikge1xuICAgIGNvbnN0IHJlc3VsdCA9IHJ1bigpXG4gICAgaWYgKHJlc3VsdCA9PT0gUlVOTklORykgcmV0dXJuIFJVTk5JTkdcbiAgICByZXR1cm4gcmVzdWx0ID09PSBTVUNDRVNTID8gRkFJTFVSRSA6IFNVQ0NFU1NcbiAgfVxufVxuIiwiaW1wb3J0IHsgRkFJTFVSRSB9IGZyb20gJy4uL2NvbnN0YW50cydcbmltcG9ydCBEZWNvcmF0b3IgZnJvbSAnLi4vRGVjb3JhdG9yJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb29wRGVjb3JhdG9yIGV4dGVuZHMgRGVjb3JhdG9yIHtcbiAgbm9kZVR5cGUgPSAnTG9vcERlY29yYXRvcidcblxuICBzZXRDb25maWcoeyBsb29wID0gSW5maW5pdHkgfSkge1xuICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgbG9vcFxuICAgIH1cbiAgfVxuXG4gIGRlY29yYXRlKHJ1bikge1xuICAgIGxldCBpID0gMFxuICAgIGxldCByZXN1bHQgPSBGQUlMVVJFXG4gICAgd2hpbGUgKGkrKyA8IHRoaXMuY29uZmlnLmxvb3ApIHtcbiAgICAgIHJlc3VsdCA9IHJ1bigpXG4gICAgICBpZiAocmVzdWx0ID09PSBGQUlMVVJFKSByZXR1cm4gRkFJTFVSRVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cbn1cbiIsImltcG9ydCB7IFJVTk5JTkcgfSBmcm9tICcuL2NvbnN0YW50cydcbmltcG9ydCBOb2RlIGZyb20gJy4vTm9kZSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnJhbmNoTm9kZSBleHRlbmRzIE5vZGUge1xuICBub2RlVHlwZSA9ICdCcmFuY2hOb2RlJ1xuXG4gIGNvbnN0cnVjdG9yKGJsdWVwcmludCkge1xuICAgIHN1cGVyKGJsdWVwcmludClcblxuICAgIHRoaXMubnVtTm9kZXMgPSBibHVlcHJpbnQubm9kZXMubGVuZ3RoXG4gICAgdGhpcy53YXNSdW5uaW5nID0gZmFsc2VcbiAgfVxuXG4gIHJ1bihibGFja2JvYXJkID0gbnVsbCwgeyBpbmRleGVzID0gW10sIGludHJvc3BlY3RvciwgcmVydW4sIHJlZ2lzdHJ5TG9va1VwID0gKHgpID0+IHggfSA9IHt9KSB7XG4gICAgaWYgKCFyZXJ1bikgdGhpcy5ibHVlcHJpbnQuc3RhcnQoYmxhY2tib2FyZClcbiAgICBsZXQgb3ZlcmFsbFJlc3VsdCA9IHRoaXMuU1RBUlRfQ0FTRVxuICAgIGxldCBjdXJyZW50SW5kZXggPSBpbmRleGVzLnNoaWZ0KCkgfHwgMFxuICAgIHdoaWxlIChjdXJyZW50SW5kZXggPCB0aGlzLm51bU5vZGVzKSB7XG4gICAgICBjb25zdCBub2RlID0gcmVnaXN0cnlMb29rVXAodGhpcy5ibHVlcHJpbnQubm9kZXNbY3VycmVudEluZGV4XSlcbiAgICAgIGNvbnN0IHJlc3VsdCA9IG5vZGUucnVuKGJsYWNrYm9hcmQsIHsgaW5kZXhlcywgaW50cm9zcGVjdG9yLCByZXJ1biwgcmVnaXN0cnlMb29rVXAgfSlcbiAgICAgIGlmIChyZXN1bHQgPT09IFJVTk5JTkcpIHtcbiAgICAgICAgdGhpcy53YXNSdW5uaW5nID0gdHJ1ZVxuICAgICAgICBvdmVyYWxsUmVzdWx0ID0gW2N1cnJlbnRJbmRleCwgLi4uaW5kZXhlc11cbiAgICAgICAgYnJlYWtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgLy8gYXJyYXlcbiAgICAgICAgb3ZlcmFsbFJlc3VsdCA9IFsuLi5pbmRleGVzLCBjdXJyZW50SW5kZXgsIC4uLnJlc3VsdF1cbiAgICAgICAgYnJlYWtcbiAgICAgIH0gZWxzZSBpZiAocmVzdWx0ID09PSB0aGlzLk9QVF9PVVRfQ0FTRSkge1xuICAgICAgICBvdmVyYWxsUmVzdWx0ID0gcmVzdWx0XG4gICAgICAgIGJyZWFrXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLndhc1J1bm5pbmcgPSBmYWxzZVxuICAgICAgICByZXJ1biA9IGZhbHNlXG4gICAgICAgICsrY3VycmVudEluZGV4XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGlzUnVubmluZyA9IG92ZXJhbGxSZXN1bHQgPT09IFJVTk5JTkcgfHwgdHlwZW9mIG92ZXJhbGxSZXN1bHQgPT09ICdvYmplY3QnXG4gICAgaWYgKCFpc1J1bm5pbmcpIHtcbiAgICAgIHRoaXMuYmx1ZXByaW50LmVuZChibGFja2JvYXJkKVxuICAgIH1cbiAgICBpZiAoaW50cm9zcGVjdG9yKSB7XG4gICAgICBjb25zdCBkZWJ1Z1Jlc3VsdCA9IGlzUnVubmluZyA/IFJVTk5JTkcgOiBvdmVyYWxsUmVzdWx0XG4gICAgICBpbnRyb3NwZWN0b3Iud3JhcExhc3QoTWF0aC5taW4oY3VycmVudEluZGV4ICsgMSwgdGhpcy5udW1Ob2RlcyksIHRoaXMsIGRlYnVnUmVzdWx0LCBibGFja2JvYXJkKVxuICAgIH1cbiAgICByZXR1cm4gb3ZlcmFsbFJlc3VsdFxuICB9XG59XG4iLCJpbXBvcnQgeyBSVU5OSU5HIH0gZnJvbSAnLi9jb25zdGFudHMnXG5pbXBvcnQgQnJhbmNoTm9kZSBmcm9tICcuL0JyYW5jaE5vZGUnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJhbmRvbSBleHRlbmRzIEJyYW5jaE5vZGUge1xuICBub2RlVHlwZSA9ICdSYW5kb20nXG5cbiAgcnVuKGJsYWNrYm9hcmQgPSBudWxsLCB7IGluZGV4ZXMgPSBbXSwgaW50cm9zcGVjdG9yLCByZXJ1biwgcmVnaXN0cnlMb29rVXAgPSAoeCkgPT4geCB9ID0ge30pIHtcbiAgICBpZiAoIXJlcnVuKSB0aGlzLmJsdWVwcmludC5zdGFydChibGFja2JvYXJkKVxuICAgIGxldCBjdXJyZW50SW5kZXggPSBpbmRleGVzLnNoaWZ0KCkgfHwgMFxuICAgIGlmICghcmVydW4pIHtcbiAgICAgIGN1cnJlbnRJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMubnVtTm9kZXMpXG4gICAgfVxuICAgIGNvbnN0IG5vZGUgPSByZWdpc3RyeUxvb2tVcCh0aGlzLmJsdWVwcmludC5ub2Rlc1tjdXJyZW50SW5kZXhdKVxuICAgIGNvbnN0IHJlc3VsdCA9IG5vZGUucnVuKGJsYWNrYm9hcmQsIHsgaW5kZXhlcywgaW50cm9zcGVjdG9yLCByZXJ1biwgcmVnaXN0cnlMb29rVXAgfSlcbiAgICBsZXQgb3ZlcmFsbFJlc3VsdCA9IHJlc3VsdFxuICAgIGlmIChyZXN1bHQgPT09IFJVTk5JTkcpIHtcbiAgICAgIG92ZXJhbGxSZXN1bHQgPSBbY3VycmVudEluZGV4LCAuLi5pbmRleGVzXVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ29iamVjdCcpIHtcbiAgICAgIC8vIGFycmF5XG4gICAgICBvdmVyYWxsUmVzdWx0ID0gWy4uLmluZGV4ZXMsIGN1cnJlbnRJbmRleCwgLi4ucmVzdWx0XVxuICAgIH1cbiAgICBjb25zdCBpc1J1bm5pbmcgPSBvdmVyYWxsUmVzdWx0ID09PSBSVU5OSU5HIHx8IHR5cGVvZiBvdmVyYWxsUmVzdWx0ID09PSAnb2JqZWN0J1xuICAgIGlmICghaXNSdW5uaW5nKSB7XG4gICAgICB0aGlzLmJsdWVwcmludC5lbmQoYmxhY2tib2FyZClcbiAgICB9XG4gICAgaWYgKGludHJvc3BlY3Rvcikge1xuICAgICAgY29uc3QgZGVidWdSZXN1bHQgPSBpc1J1bm5pbmcgPyBSVU5OSU5HIDogb3ZlcmFsbFJlc3VsdFxuICAgICAgaW50cm9zcGVjdG9yLndyYXBMYXN0KDEsIHRoaXMsIGRlYnVnUmVzdWx0LCBibGFja2JvYXJkKVxuICAgIH1cbiAgICByZXR1cm4gb3ZlcmFsbFJlc3VsdFxuICB9XG59XG4iLCJpbXBvcnQgeyBTVUNDRVNTLCBGQUlMVVJFIH0gZnJvbSAnLi9jb25zdGFudHMnXG5pbXBvcnQgQnJhbmNoTm9kZSBmcm9tICcuL0JyYW5jaE5vZGUnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlbGVjdG9yIGV4dGVuZHMgQnJhbmNoTm9kZSB7XG4gIG5vZGVUeXBlID0gJ1NlbGVjdG9yJ1xuICBTVEFSVF9DQVNFID0gRkFJTFVSRVxuICBPUFRfT1VUX0NBU0UgPSBTVUNDRVNTXG59XG4iLCJpbXBvcnQgeyBTVUNDRVNTLCBGQUlMVVJFIH0gZnJvbSAnLi9jb25zdGFudHMnXG5pbXBvcnQgQnJhbmNoTm9kZSBmcm9tICcuL0JyYW5jaE5vZGUnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlcXVlbmNlIGV4dGVuZHMgQnJhbmNoTm9kZSB7XG4gIG5vZGVUeXBlID0gJ1NlcXVlbmNlJ1xuICBTVEFSVF9DQVNFID0gU1VDQ0VTU1xuICBPUFRfT1VUX0NBU0UgPSBGQUlMVVJFXG59XG4iLCJpbXBvcnQgRGVjb3JhdG9yIGZyb20gJy4vRGVjb3JhdG9yJ1xuaW1wb3J0IFJhbmRvbSBmcm9tICcuL1JhbmRvbSdcbmltcG9ydCBTZWxlY3RvciBmcm9tICcuL1NlbGVjdG9yJ1xuaW1wb3J0IFNlcXVlbmNlIGZyb20gJy4vU2VxdWVuY2UnXG5pbXBvcnQgVGFzayBmcm9tICcuL1Rhc2snXG5pbXBvcnQgQWx3YXlzRmFpbERlY29yYXRvciBmcm9tICcuL2RlY29yYXRvcnMvQWx3YXlzRmFpbERlY29yYXRvcidcbmltcG9ydCBBbHdheXNTdWNjZWVkRGVjb3JhdG9yIGZyb20gJy4vZGVjb3JhdG9ycy9BbHdheXNTdWNjZWVkRGVjb3JhdG9yJ1xuaW1wb3J0IENvb2xkb3duRGVjb3JhdG9yIGZyb20gJy4vZGVjb3JhdG9ycy9Db29sZG93bkRlY29yYXRvcidcbmltcG9ydCBJbnZlcnREZWNvcmF0b3IgZnJvbSAnLi9kZWNvcmF0b3JzL0ludmVydERlY29yYXRvcidcbmltcG9ydCBMb29wRGVjb3JhdG9yIGZyb20gJy4vZGVjb3JhdG9ycy9Mb29wRGVjb3JhdG9yJ1xuaW1wb3J0IHsgcmVnaXN0cnlMb29rVXAgfSBmcm9tICcuL0JlaGF2aW9yVHJlZSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmVoYXZpb3JUcmVlSW1wb3J0ZXIge1xuICB0eXBlcyA9IHtcbiAgICB0YXNrOiBUYXNrLFxuICAgIGRlY29yYXRvcjogRGVjb3JhdG9yLFxuICAgIHNlbGVjdG9yOiBTZWxlY3RvcixcbiAgICBzZXF1ZW5jZTogU2VxdWVuY2UsXG4gICAgcmFuZG9tOiBSYW5kb20sXG4gICAgaW52ZXJ0OiBJbnZlcnREZWNvcmF0b3IsXG4gICAgZmFpbDogQWx3YXlzRmFpbERlY29yYXRvcixcbiAgICBzdWNjZWVkOiBBbHdheXNTdWNjZWVkRGVjb3JhdG9yLFxuICAgIGNvb2xkb3duOiBDb29sZG93bkRlY29yYXRvcixcbiAgICBsb29wOiBMb29wRGVjb3JhdG9yXG4gIH1cblxuICBkZWZpbmVUeXBlKHR5cGUsIEtsYXNzKSB7XG4gICAgdGhpcy50eXBlc1t0eXBlXSA9IEtsYXNzXG4gIH1cblxuICBwYXJzZShqc29uKSB7XG4gICAgY29uc3QgeyB0eXBlLCBuYW1lLCBub2RlLCBub2RlcywgLi4uY29uZmlnIH0gPSBqc29uXG4gICAgY29uc3QgS2xhc3MgPSB0aGlzLnR5cGVzW3R5cGVdXG4gICAgaWYgKCFLbGFzcykge1xuICAgICAgY29uc3QgcmVnaXN0ZXJlZE5vZGUgPSByZWdpc3RyeUxvb2tVcCh0eXBlKVxuICAgICAgaWYgKHJlZ2lzdGVyZWROb2RlKSB7XG4gICAgICAgIHJlZ2lzdGVyZWROb2RlLm5hbWUgPSBuYW1lXG4gICAgICAgIHJldHVybiByZWdpc3RlcmVkTm9kZVxuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBEb24ndCBrbm93IGhvdyB0byBoYW5kbGUgdHlwZSAke3R5cGV9LiBQbGVhc2UgcmVnaXN0ZXIgdGhpcyBmaXJzdC5gKVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgS2xhc3Moe1xuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIG5vZGU6IG5vZGUgPyB0aGlzLnBhcnNlKG5vZGUpIDogbnVsbCxcbiAgICAgIG5vZGVzOiBub2RlcyA/IG5vZGVzLm1hcCgoc3ViSnNvbikgPT4gdGhpcy5wYXJzZShzdWJKc29uKSkgOiBudWxsLFxuICAgICAgY29uZmlnXG4gICAgfSlcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW50cm9zcGVjdG9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5yZXN1bHRzID0gW11cbiAgfVxuXG4gIHN0YXJ0KHRyZWUpIHtcbiAgICB0aGlzLnRyZWUgPSB0cmVlXG4gICAgdGhpcy5jdXJyZW50UmVzdWx0ID0gW11cbiAgfVxuXG4gIGVuZCgpIHtcbiAgICB0aGlzLnJlc3VsdHMucHVzaCh0aGlzLmN1cnJlbnRSZXN1bHQucG9wKCkpXG4gICAgZGVsZXRlIHRoaXMudHJlZVxuICAgIGRlbGV0ZSB0aGlzLmN1cnJlbnRSZXN1bHRcbiAgfVxuXG4gIHB1c2gobm9kZSwgcmVzdWx0LCBibGFja2JvYXJkKSB7XG4gICAgdGhpcy5jdXJyZW50UmVzdWx0LnB1c2godGhpcy5fdG9SZXN1bHQobm9kZSwgcmVzdWx0LCBibGFja2JvYXJkKSlcbiAgfVxuXG4gIHdyYXBMYXN0KG51bVJlc3VsdHMsIG5vZGUsIHJlc3VsdCwgYmxhY2tib2FyZCkge1xuICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5jdXJyZW50UmVzdWx0LnNwbGljZSh0aGlzLmN1cnJlbnRSZXN1bHQubGVuZ3RoIC0gbnVtUmVzdWx0cywgbnVtUmVzdWx0cylcbiAgICB0aGlzLmN1cnJlbnRSZXN1bHQucHVzaCh7IC4uLnRoaXMuX3RvUmVzdWx0KG5vZGUsIHJlc3VsdCwgYmxhY2tib2FyZCksIGNoaWxkcmVuIH0pXG4gIH1cblxuICBfdG9SZXN1bHQobm9kZSwgcmVzdWx0KSB7XG4gICAgcmV0dXJuIHsgLi4uKG5vZGUubmFtZSA/IHsgbmFtZTogbm9kZS5uYW1lIH0gOiB7fSksIHJlc3VsdCB9XG4gIH1cblxuICByZXNldCgpIHtcbiAgICB0aGlzLnJlc3VsdHMgPSBbXVxuICB9XG5cbiAgZ2V0IGxhc3RSZXN1bHQoKSB7XG4gICAgaWYgKHRoaXMucmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnJlc3VsdHNbdGhpcy5yZXN1bHRzLmxlbmd0aCAtIDFdXG4gIH1cbn1cbiIsImltcG9ydCBCZWhhdmlvclRyZWUsIHsgZ2V0UmVnaXN0cnksIHJlZ2lzdHJ5TG9va1VwIH0gZnJvbSAnLi9CZWhhdmlvclRyZWUnXG5pbXBvcnQgKiBhcyBkZWNvcmF0b3JzIGZyb20gJy4vZGVjb3JhdG9ycydcblxuaW1wb3J0IEJlaGF2aW9yVHJlZUltcG9ydGVyIGZyb20gJy4vQmVoYXZpb3JUcmVlSW1wb3J0ZXInXG5cbmltcG9ydCBCcmFuY2hOb2RlIGZyb20gJy4vQnJhbmNoTm9kZSdcbmltcG9ydCBOb2RlIGZyb20gJy4vTm9kZSdcbmltcG9ydCBTZWxlY3RvciBmcm9tICcuL1NlbGVjdG9yJ1xuaW1wb3J0IFNlcXVlbmNlIGZyb20gJy4vU2VxdWVuY2UnXG5pbXBvcnQgUmFuZG9tIGZyb20gJy4vUmFuZG9tJ1xuaW1wb3J0IERlY29yYXRvciBmcm9tICcuL0RlY29yYXRvcidcbmltcG9ydCBUYXNrIGZyb20gJy4vVGFzaydcbmltcG9ydCBJbnRyb3NwZWN0b3IgZnJvbSAnLi9JbnRyb3NwZWN0b3InXG5cbmltcG9ydCB7IFNVQ0NFU1MsIEZBSUxVUkUsIFJVTk5JTkcgfSBmcm9tICcuL2NvbnN0YW50cydcblxuZXhwb3J0IGRlZmF1bHQgQmVoYXZpb3JUcmVlXG5cbmV4cG9ydCB7XG4gIEJlaGF2aW9yVHJlZSxcbiAgU1VDQ0VTUyxcbiAgRkFJTFVSRSxcbiAgUlVOTklORyxcbiAgZ2V0UmVnaXN0cnksXG4gIHJlZ2lzdHJ5TG9va1VwLFxuICBCZWhhdmlvclRyZWVJbXBvcnRlcixcbiAgQnJhbmNoTm9kZSxcbiAgTm9kZSxcbiAgU2VsZWN0b3IsXG4gIFNlcXVlbmNlLFxuICBSYW5kb20sXG4gIERlY29yYXRvcixcbiAgVGFzayxcbiAgSW50cm9zcGVjdG9yLFxuICBkZWNvcmF0b3JzXG59XG4iXSwic291cmNlUm9vdCI6IiJ9