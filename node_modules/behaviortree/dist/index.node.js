(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{BehaviorTree:()=>R,BehaviorTreeImporter:()=>ye,BranchNode:()=>Nt,Decorator:()=>N,FAILURE:()=>u,Introspector:()=>de,Node:()=>p,RUNNING:()=>n,Random:()=>Vt,SUCCESS:()=>o,Selector:()=>ne,Sequence:()=>se,Task:()=>g,decorators:()=>r,default:()=>me,getRegistry:()=>S,registryLookUp:()=>_});var r={};t.r(r),t.d(r,{AlwaysFailDecorator:()=>K,AlwaysSucceedDecorator:()=>rt,CooldownDecorator:()=>st,InvertDecorator:()=>gt,LoopDecorator:()=>Et});var n=Symbol("running"),o=!0,u=!1;function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},u=Object.keys(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s=function(){},p=function(){function t(e){var r=e.run,n=void 0===r?s:r,o=e.start,u=void 0===o?s:o,c=e.end,a=void 0===c?s:c,p=f(e,["run","start","end"]);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,"nodeType","Node"),this.blueprint=i({run:n,start:u,end:a},p)}var e,r;return e=t,(r=[{key:"run",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.introspector,o=e.rerun,u=void 0!==o&&o,c=e.registryLookUp,a=void 0===c?function(t){return t}:c,l=f(e,["introspector","rerun","registryLookUp"]);u||this.blueprint.start(t);var s=this.blueprint.run(t,i(i({},l),{},{rerun:u,registryLookUp:a}));return s!==n&&this.blueprint.end(t),r&&r.push(this,s,t),s}},{key:"name",get:function(){return this._name||this.blueprint.name},set:function(t){this._name=t}}])&&a(e.prototype,r),t}();function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?O(t):e}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(o,t);var e,r,n=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=d(e);if(r){var o=d(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return v(this,t)});function o(){var t;b(this,o);for(var e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return m(O(t=n.call.apply(n,[this].concat(r))),"nodeType","Task"),t}return o}(p);function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var P={};function S(){return P}function _(t){if("string"==typeof t){var e=P[t];if(!e)throw new Error("No node with name ".concat(t," registered."));return e}return t}var R=function(){function t(e){var r=e.tree,n=e.blackboard;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tree=r,this.blackboard=n,this.lastResult=null}var e,r,o;return e=t,o=[{key:"register",value:function(t,e){P[t]="function"==typeof e?new g({name:t,run:e}):e}},{key:"cleanRegistry",value:function(){P={}}}],(r=[{key:"step",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.introspector,r=this.lastResult&&"object"===w(this.lastResult)?this.lastResult:[],o=this.lastResult===n||r.length>0;e&&e.start(this),this.lastResult=_(this.tree).run(this.blackboard,{indexes:r,introspector:e,rerun:o,registryLookUp:_}),e&&e.end()}}])&&j(e.prototype,r),o&&j(e,o),t}();function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function E(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?T(Object(r),!0).forEach((function(e){I(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function A(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},u=Object.keys(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function B(t,e){return(B=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?U(t):e}function U(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&B(t,e)}(i,t);var e,r,o,u,c=(o=i,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=L(o);if(u){var r=L(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return D(this,t)});function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.config,n=void 0===r?{}:r,o=A(e,["config"]);return x(this,i),I(U(t=c.call(this,o)),"nodeType","Decorator"),t.setConfig(n),t}return e=i,(r=[{key:"decorate",value:function(t){return t()}},{key:"run",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.introspector,u=r.rerun,c=r.registryLookUp,i=void 0===c?function(t){return t}:c,f=A(r,["introspector","rerun","registryLookUp"]);u||this.blueprint.start(t);var a=0,l=this.decorate((function(){return++a,i(e.blueprint.node).run(t,E(E({},f),{},{rerun:u,introspector:o,registryLookUp:i}))}),t,this.config);return l!==n&&this.blueprint.end(t),o&&o.wrapLast(a,this,l,t),l}},{key:"setConfig",value:function(t){this.config=t}}])&&C(e.prototype,r),i}(p);function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $(t,e){return($=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function G(t,e){return!e||"object"!==M(e)&&"function"!=typeof e?z(t):e}function z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function J(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$(t,e)}(f,t);var e,r,o,c,i=(o=f,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=H(o);if(c){var r=H(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return G(this,t)});function f(){var t;q(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return J(z(t=i.call.apply(i,[this].concat(r))),"nodeType","AlwaysFailDecorator"),t}return e=f,(r=[{key:"decorate",value:function(t){return t()===n?n:u}}])&&F(e.prototype,r),f}(N);function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function X(t,e){return(X=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Y(t,e){return!e||"object"!==Q(e)&&"function"!=typeof e?Z(t):e}function Z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function et(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var rt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&X(t,e)}(f,t);var e,r,u,c,i=(u=f,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=tt(u);if(c){var r=tt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return Y(this,t)});function f(){var t;V(this,f);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return et(Z(t=i.call.apply(i,[this].concat(r))),"nodeType","AlwaysSucceedDecorator"),t}return e=f,(r=[{key:"decorate",value:function(t){return t()===n?n:o}}])&&W(e.prototype,r),f}(N);function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ct(t,e){return(ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function it(t,e){return!e||"object"!==nt(e)&&"function"!=typeof e?ft(t):e}function ft(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function at(t){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var st=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ct(t,e)}(i,t);var e,r,n,o,c=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=at(n);if(o){var r=at(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return it(this,t)});function i(){var t;ot(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return lt(ft(t=c.call.apply(c,[this].concat(r))),"nodeType","CooldownDecorator"),t}return e=i,(r=[{key:"setConfig",value:function(t){var e=t.cooldown,r=void 0===e?5:e;this.config={cooldown:r}}},{key:"decorate",value:function(t){var e=this;return this.lock?u:(this.lock=!0,setTimeout((function(){e.lock=!1}),1e3*this.config.cooldown),t())}}])&&ut(e.prototype,r),i}(N);function pt(t){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ht(t,e){return(ht=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vt(t,e){return!e||"object"!==pt(e)&&"function"!=typeof e?Ot(t):e}function Ot(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dt(t){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ht(t,e)}(a,t);var e,r,c,i,f=(c=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=dt(c);if(i){var r=dt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return vt(this,t)});function a(){var t;yt(this,a);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return mt(Ot(t=f.call.apply(f,[this].concat(r))),"nodeType","InvertDecorator"),t}return e=a,(r=[{key:"decorate",value:function(t){var e=t();return e===n?n:e===o?u:o}}])&&bt(e.prototype,r),a}(N);function wt(t){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _t(t,e){return!e||"object"!==wt(e)&&"function"!=typeof e?Rt(t):e}function Rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&St(t,e)}(i,t);var e,r,n,o,c=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=kt(n);if(o){var r=kt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return _t(this,t)});function i(){var t;jt(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Tt(Rt(t=c.call.apply(c,[this].concat(r))),"nodeType","LoopDecorator"),t}return e=i,(r=[{key:"setConfig",value:function(t){var e=t.loop,r=void 0===e?1/0:e;this.config={loop:r}}},{key:"decorate",value:function(t){for(var e=0,r=u;e++<this.config.loop;)if((r=t())===u)return u;return r}}])&&Pt(e.prototype,r),i}(N);function At(t){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xt(t){return function(t){if(Array.isArray(t))return Ct(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ct(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ct(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Bt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Dt(t,e){return(Dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ut(t,e){return!e||"object"!==At(e)&&"function"!=typeof e?Lt(t):e}function Lt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function It(t){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dt(t,e)}(i,t);var e,r,o,u,c=(o=i,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=It(o);if(u){var r=It(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return Ut(this,t)});function i(t){var e,r,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o="BranchNode",(n="nodeType")in(r=Lt(e=c.call(this,t)))?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,e.numNodes=t.nodes.length,e.wasRunning=!1,e}return e=i,(r=[{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.indexes,o=void 0===r?[]:r,u=e.introspector,c=e.rerun,i=e.registryLookUp,f=void 0===i?function(t){return t}:i;c||this.blueprint.start(t);for(var a=this.START_CASE,l=o.shift()||0;l<this.numNodes;){var s=f(this.blueprint.nodes[l]),p=s.run(t,{indexes:o,introspector:u,rerun:c,registryLookUp:f});if(p===n){this.wasRunning=!0,a=[l].concat(xt(o));break}if("object"===At(p)){a=[].concat(xt(o),[l],xt(p));break}if(p===this.OPT_OUT_CASE){a=p;break}this.wasRunning=!1,c=!1,++l}var y=a===n||"object"===At(a);if(y||this.blueprint.end(t),u){var b=y?n:a;u.wrapLast(Math.min(l+1,this.numNodes),this,b,t)}return a}}])&&Bt(e.prototype,r),i}(p);function Mt(t){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qt(t){return function(t){if(Array.isArray(t))return Ft(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ft(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ft(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zt(t,e){return(zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ht(t,e){return!e||"object"!==Mt(e)&&"function"!=typeof e?Jt(t):e}function Jt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kt(t){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Vt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zt(t,e)}(i,t);var e,r,o,u,c=(o=i,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Kt(o);if(u){var r=Kt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return Ht(this,t)});function i(){var t;$t(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return Qt(Jt(t=c.call.apply(c,[this].concat(r))),"nodeType","Random"),t}return e=i,(r=[{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.indexes,o=void 0===r?[]:r,u=e.introspector,c=e.rerun,i=e.registryLookUp,f=void 0===i?function(t){return t}:i;c||this.blueprint.start(t);var a=o.shift()||0;c||(a=Math.floor(Math.random()*this.numNodes));var l=f(this.blueprint.nodes[a]),s=l.run(t,{indexes:o,introspector:u,rerun:c,registryLookUp:f}),p=s;s===n?p=[a].concat(qt(o)):"object"===Mt(s)&&(p=[].concat(qt(o),[a],qt(s)));var y=p===n||"object"===Mt(p);if(y||this.blueprint.end(t),u){var b=y?n:p;u.wrapLast(1,this,b,t)}return p}}])&&Gt(e.prototype,r),i}(Nt);function Wt(t){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yt(t,e){return(Yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zt(t,e){return!e||"object"!==Wt(e)&&"function"!=typeof e?te(t):e}function te(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ee(t){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function re(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ne=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yt(t,e)}(c,t);var e,r,n=(e=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=ee(e);if(r){var o=ee(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return Zt(this,t)});function c(){var t;Xt(this,c);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return re(te(t=n.call.apply(n,[this].concat(r))),"nodeType","Selector"),re(te(t),"START_CASE",u),re(te(t),"OPT_OUT_CASE",o),t}return c}(Nt);function oe(t){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ce(t,e){return(ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ie(t,e){return!e||"object"!==oe(e)&&"function"!=typeof e?fe(t):e}function fe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ae(t){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function le(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ce(t,e)}(c,t);var e,r,n=(e=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=ae(e);if(r){var o=ae(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return ie(this,t)});function c(){var t;ue(this,c);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return le(fe(t=n.call.apply(n,[this].concat(r))),"nodeType","Sequence"),le(fe(t),"START_CASE",o),le(fe(t),"OPT_OUT_CASE",u),t}return c}(Nt);function pe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ye=function(){function t(){var e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r={task:g,decorator:N,selector:ne,sequence:se,random:Vt,invert:gt,fail:K,succeed:rt,cooldown:st,loop:Et},(e="types")in this?Object.defineProperty(this,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[e]=r}var e,r;return e=t,(r=[{key:"defineType",value:function(t,e){this.types[t]=e}},{key:"parse",value:function(t){var e=this,r=t.type,n=t.name,o=t.node,u=t.nodes,c=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},u=Object.keys(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,["type","name","node","nodes"]),i=this.types[r];if(!i){var f=_(r);if(f)return f.name=n,f;throw new Error("Don't know how to handle type ".concat(r,". Please register this first."))}return new i({name:n,node:o?this.parse(o):null,nodes:u?u.map((function(t){return e.parse(t)})):null,config:c})}}])&&pe(e.prototype,r),t}();function be(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function he(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?be(Object(r),!0).forEach((function(e){ve(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ve(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var de=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.results=[]}var e,r;return e=t,(r=[{key:"start",value:function(t){this.tree=t,this.currentResult=[]}},{key:"end",value:function(){this.results.push(this.currentResult.pop()),delete this.tree,delete this.currentResult}},{key:"push",value:function(t,e,r){this.currentResult.push(this._toResult(t,e,r))}},{key:"wrapLast",value:function(t,e,r,n){var o=this.currentResult.splice(this.currentResult.length-t,t);this.currentResult.push(he(he({},this._toResult(e,r,n)),{},{children:o}))}},{key:"_toResult",value:function(t,e){return he(he({},t.name?{name:t.name}:{}),{},{result:e})}},{key:"reset",value:function(){this.results=[]}},{key:"lastResult",get:function(){return 0===this.results.length?null:this.results[this.results.length-1]}}])&&Oe(e.prototype,r),t}();const me=R;var ge=exports;for(var we in e)ge[we]=e[we];e.__esModule&&Object.defineProperty(ge,"__esModule",{value:!0})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYmVoYXZpb3J0cmVlL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvLi9zcmMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL2JlaGF2aW9ydHJlZS8uL3NyYy9Ob2RlLmpzIiwid2VicGFjazovL2JlaGF2aW9ydHJlZS8uL3NyYy9UYXNrLmpzIiwid2VicGFjazovL2JlaGF2aW9ydHJlZS8uL3NyYy9CZWhhdmlvclRyZWUuanMiLCJ3ZWJwYWNrOi8vYmVoYXZpb3J0cmVlLy4vc3JjL0RlY29yYXRvci5qcyIsIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvLi9zcmMvZGVjb3JhdG9ycy9BbHdheXNGYWlsRGVjb3JhdG9yLmpzIiwid2VicGFjazovL2JlaGF2aW9ydHJlZS8uL3NyYy9kZWNvcmF0b3JzL0Fsd2F5c1N1Y2NlZWREZWNvcmF0b3IuanMiLCJ3ZWJwYWNrOi8vYmVoYXZpb3J0cmVlLy4vc3JjL2RlY29yYXRvcnMvQ29vbGRvd25EZWNvcmF0b3IuanMiLCJ3ZWJwYWNrOi8vYmVoYXZpb3J0cmVlLy4vc3JjL2RlY29yYXRvcnMvSW52ZXJ0RGVjb3JhdG9yLmpzIiwid2VicGFjazovL2JlaGF2aW9ydHJlZS8uL3NyYy9kZWNvcmF0b3JzL0xvb3BEZWNvcmF0b3IuanMiLCJ3ZWJwYWNrOi8vYmVoYXZpb3J0cmVlLy4vc3JjL0JyYW5jaE5vZGUuanMiLCJ3ZWJwYWNrOi8vYmVoYXZpb3J0cmVlLy4vc3JjL1JhbmRvbS5qcyIsIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvLi9zcmMvU2VsZWN0b3IuanMiLCJ3ZWJwYWNrOi8vYmVoYXZpb3J0cmVlLy4vc3JjL1NlcXVlbmNlLmpzIiwid2VicGFjazovL2JlaGF2aW9ydHJlZS8uL3NyYy9CZWhhdmlvclRyZWVJbXBvcnRlci5qcyIsIndlYnBhY2s6Ly9iZWhhdmlvcnRyZWUvLi9zcmMvSW50cm9zcGVjdG9yLmpzIiwid2VicGFjazovL2JlaGF2aW9ydHJlZS8uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJSVU5OSU5HIiwiU1VDQ0VTUyIsIkZBSUxVUkUiLCJOT09QIiwiTm9kZSIsInJ1biIsInN0YXJ0IiwiZW5kIiwicHJvcHMiLCJ0aGlzIiwiYmx1ZXByaW50IiwiYmxhY2tib2FyZCIsImludHJvc3BlY3RvciIsInJlcnVuIiwicmVnaXN0cnlMb29rVXAiLCJ4IiwiY29uZmlnIiwicmVzdWx0IiwicHVzaCIsIl9uYW1lIiwibmFtZSIsIlRhc2siLCJyZWdpc3RyeSIsImdldFJlZ2lzdHJ5Iiwibm9kZSIsImxvb2tlZFVwTm9kZSIsIkVycm9yIiwiQmVoYXZpb3JUcmVlIiwidHJlZSIsImxhc3RSZXN1bHQiLCJpbmRleGVzIiwibGVuZ3RoIiwiRGVjb3JhdG9yIiwic2V0Q29uZmlnIiwicnVuQ291bnQiLCJkZWNvcmF0ZSIsIndyYXBMYXN0IiwiQWx3YXlzRmFpbERlY29yYXRvciIsIkFsd2F5c1N1Y2NlZWREZWNvcmF0b3IiLCJDb29sZG93bkRlY29yYXRvciIsImNvb2xkb3duIiwibG9jayIsInNldFRpbWVvdXQiLCJJbnZlcnREZWNvcmF0b3IiLCJMb29wRGVjb3JhdG9yIiwibG9vcCIsIkluZmluaXR5IiwiaSIsIkJyYW5jaE5vZGUiLCJudW1Ob2RlcyIsIm5vZGVzIiwid2FzUnVubmluZyIsIm92ZXJhbGxSZXN1bHQiLCJTVEFSVF9DQVNFIiwiY3VycmVudEluZGV4Iiwic2hpZnQiLCJPUFRfT1VUX0NBU0UiLCJpc1J1bm5pbmciLCJkZWJ1Z1Jlc3VsdCIsIk1hdGgiLCJtaW4iLCJSYW5kb20iLCJmbG9vciIsInJhbmRvbSIsIlNlbGVjdG9yIiwiU2VxdWVuY2UiLCJCZWhhdmlvclRyZWVJbXBvcnRlciIsInRhc2siLCJkZWNvcmF0b3IiLCJzZWxlY3RvciIsInNlcXVlbmNlIiwiaW52ZXJ0IiwiZmFpbCIsInN1Y2NlZWQiLCJ0eXBlIiwiS2xhc3MiLCJ0eXBlcyIsImpzb24iLCJyZWdpc3RlcmVkTm9kZSIsInBhcnNlIiwibWFwIiwic3ViSnNvbiIsIkludHJvc3BlY3RvciIsInJlc3VsdHMiLCJjdXJyZW50UmVzdWx0IiwicG9wIiwiX3RvUmVzdWx0IiwibnVtUmVzdWx0cyIsImNoaWxkcmVuIiwic3BsaWNlIl0sIm1hcHBpbmdzIjoibUJBQ0EsSUFBSUEsRUFBc0IsQ0NBMUIsRUFBd0IsQ0FBQ0MsRUFBU0MsS0FDakMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYRixFQUFvQkksRUFBRUYsRUFBWUMsS0FBU0gsRUFBb0JJLEVBQUVILEVBQVNFLElBQzVFRSxPQUFPQyxlQUFlTCxFQUFTRSxFQUFLLENBQUVJLFlBQVksRUFBTUMsSUFBS04sRUFBV0MsTUNKM0UsRUFBd0IsQ0FBQ00sRUFBS0MsSUFBVUwsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NDbEYsRUFBeUJULElBQ0gsb0JBQVhhLFFBQTBCQSxPQUFPQyxhQUMxQ1YsT0FBT0MsZUFBZUwsRUFBU2EsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEWCxPQUFPQyxlQUFlTCxFQUFTLGFBQWMsQ0FBRWUsT0FBTyxNLHFjQ0xoRCxJQUFNQyxFQUFVSCxPQUFPLFdBQ2pCSSxHQUFVLEVBQ1ZDLEdBQVUsRSxpdENDQXZCLElBQU1DLEVB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QUFjckQsT0FBU3dELEVBQVlBLEdBQ25GOUUsS0FBSzJFLGNBQWNsRSxLQUFuQixTQUE2QlQsS0FBSzZFLFVBQVU5RCxFQUFNUCxFQUFRTixJQUExRCxJQUF1RTZFLGdCLHVCQUd6RSxTQUFVaEUsRUFBTVAsR0FDZCxnQkFBYU8sRUFBS0osS0FBTyxDQUFFQSxLQUFNSSxFQUFLSixNQUFTLElBQS9DLElBQW9ESCxhLG1CQUd0RCxXQUNFUixLQUFLMEUsUUFBVSxLLHNCQUdqQixXQUNFLE9BQTRCLElBQXhCMUUsS0FBSzBFLFFBQVFwRCxPQUNSLEtBRUZ0QixLQUFLMEUsUUFBUTFFLEtBQUswRSxRQUFRcEQsT0FBUyxRLHVCQ3JCOUMsVyIsImZpbGUiOiJpbmRleC5ub2RlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJleHBvcnQgY29uc3QgUlVOTklORyA9IFN5bWJvbCgncnVubmluZycpXG5leHBvcnQgY29uc3QgU1VDQ0VTUyA9IHRydWVcbmV4cG9ydCBjb25zdCBGQUlMVVJFID0gZmFsc2VcbiIsImltcG9ydCB7IFJVTk5JTkcgfSBmcm9tICcuL2NvbnN0YW50cydcblxuY29uc3QgTk9PUCA9ICgpID0+IHt9XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vZGUge1xuICBub2RlVHlwZSA9ICdOb2RlJ1xuXG4gIGNvbnN0cnVjdG9yKHsgcnVuID0gTk9PUCwgc3RhcnQgPSBOT09QLCBlbmQgPSBOT09QLCAuLi5wcm9wcyB9KSB7XG4gICAgdGhpcy5ibHVlcHJpbnQgPSB7IHJ1biwgc3RhcnQsIGVuZCwgLi4ucHJvcHMgfVxuICB9XG5cbiAgcnVuKGJsYWNrYm9hcmQsIHsgaW50cm9zcGVjdG9yLCByZXJ1biA9IGZhbHNlLCByZWdpc3RyeUxvb2tVcCA9ICh4KSA9PiB4LCAuLi5jb25maWcgfSA9IHt9KSB7XG4gICAgaWYgKCFyZXJ1bikgdGhpcy5ibHVlcHJpbnQuc3RhcnQoYmxhY2tib2FyZClcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLmJsdWVwcmludC5ydW4oYmxhY2tib2FyZCwgeyAuLi5jb25maWcsIHJlcnVuLCByZWdpc3RyeUxvb2tVcCB9KVxuICAgIGlmIChyZXN1bHQgIT09IFJVTk5JTkcpIHtcbiAgICAgIHRoaXMuYmx1ZXByaW50LmVuZChibGFja2JvYXJkKVxuICAgIH1cbiAgICBpZiAoaW50cm9zcGVjdG9yKSB7XG4gICAgICBpbnRyb3NwZWN0b3IucHVzaCh0aGlzLCByZXN1bHQsIGJsYWNrYm9hcmQpXG4gICAgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIGdldCBuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLl9uYW1lIHx8IHRoaXMuYmx1ZXByaW50Lm5hbWVcbiAgfVxuXG4gIHNldCBuYW1lKG5hbWUpIHtcbiAgICB0aGlzLl9uYW1lID0gbmFtZVxuICB9XG59XG4iLCJpbXBvcnQgTm9kZSBmcm9tICcuL05vZGUnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRhc2sgZXh0ZW5kcyBOb2RlIHtcbiAgbm9kZVR5cGUgPSAnVGFzaydcbn1cbiIsImltcG9ydCB7IFJVTk5JTkcgfSBmcm9tICcuL2NvbnN0YW50cydcbmltcG9ydCBUYXNrIGZyb20gJy4vVGFzaydcblxubGV0IHJlZ2lzdHJ5ID0ge31cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlZ2lzdHJ5KCkge1xuICByZXR1cm4gcmVnaXN0cnlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdHJ5TG9va1VwKG5vZGUpIHtcbiAgaWYgKHR5cGVvZiBub2RlID09PSAnc3RyaW5nJykge1xuICAgIGNvbnN0IGxvb2tlZFVwTm9kZSA9IHJlZ2lzdHJ5W25vZGVdXG4gICAgaWYgKCFsb29rZWRVcE5vZGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gbm9kZSB3aXRoIG5hbWUgJHtub2RlfSByZWdpc3RlcmVkLmApXG4gICAgfVxuICAgIHJldHVybiBsb29rZWRVcE5vZGVcbiAgfVxuICByZXR1cm4gbm9kZVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCZWhhdmlvclRyZWUge1xuICBjb25zdHJ1Y3Rvcih7IHRyZWUsIGJsYWNrYm9hcmQgfSkge1xuICAgIHRoaXMudHJlZSA9IHRyZWVcbiAgICB0aGlzLmJsYWNrYm9hcmQgPSBibGFja2JvYXJkXG4gICAgdGhpcy5sYXN0UmVzdWx0ID0gbnVsbFxuICB9XG5cbiAgc3RlcCh7IGludHJvc3BlY3RvciB9ID0ge30pIHtcbiAgICBjb25zdCBpbmRleGVzID0gdGhpcy5sYXN0UmVzdWx0ICYmIHR5cGVvZiB0aGlzLmxhc3RSZXN1bHQgPT09ICdvYmplY3QnID8gdGhpcy5sYXN0UmVzdWx0IDogW11cbiAgICBjb25zdCByZXJ1biA9IHRoaXMubGFzdFJlc3VsdCA9PT0gUlVOTklORyB8fCBpbmRleGVzLmxlbmd0aCA+IDBcbiAgICBpZiAoaW50cm9zcGVjdG9yKSB7XG4gICAgICBpbnRyb3NwZWN0b3Iuc3RhcnQodGhpcylcbiAgICB9XG4gICAgdGhpcy5sYXN0UmVzdWx0ID0gcmVnaXN0cnlMb29rVXAodGhpcy50cmVlKS5ydW4odGhpcy5ibGFja2JvYXJkLCB7XG4gICAgICBpbmRleGVzLFxuICAgICAgaW50cm9zcGVjdG9yLFxuICAgICAgcmVydW4sXG4gICAgICByZWdpc3RyeUxvb2tVcFxuICAgIH0pXG4gICAgaWYgKGludHJvc3BlY3Rvcikge1xuICAgICAgaW50cm9zcGVjdG9yLmVuZCgpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHJlZ2lzdGVyKG5hbWUsIG5vZGUpIHtcbiAgICByZWdpc3RyeVtuYW1lXSA9IHR5cGVvZiBub2RlID09PSAnZnVuY3Rpb24nID8gbmV3IFRhc2soeyBuYW1lLCBydW46IG5vZGUgfSkgOiBub2RlXG4gIH1cblxuICBzdGF0aWMgY2xlYW5SZWdpc3RyeSgpIHtcbiAgICByZWdpc3RyeSA9IHt9XG4gIH1cbn1cbiIsImltcG9ydCB7IFJVTk5JTkcgfSBmcm9tICcuL2NvbnN0YW50cydcbmltcG9ydCBOb2RlIGZyb20gJy4vTm9kZSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGVjb3JhdG9yIGV4dGVuZHMgTm9kZSB7XG4gIG5vZGVUeXBlID0gJ0RlY29yYXRvcidcblxuICBjb25zdHJ1Y3Rvcih7IGNvbmZpZyA9IHt9LCAuLi5wcm9wcyB9ID0ge30pIHtcbiAgICBzdXBlcihwcm9wcylcbiAgICB0aGlzLnNldENvbmZpZyhjb25maWcpXG4gIH1cblxuICBkZWNvcmF0ZShydW4pIHtcbiAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgYmUgb3ZlcnJpZGRlbiB0byBtYWtlIGl0IHVzZWZ1bFxuICAgIHJldHVybiBydW4oKVxuICB9XG5cbiAgcnVuKGJsYWNrYm9hcmQsIHsgaW50cm9zcGVjdG9yLCByZXJ1biwgcmVnaXN0cnlMb29rVXAgPSAoeCkgPT4geCwgLi4uY29uZmlnIH0gPSB7fSkge1xuICAgIGlmICghcmVydW4pIHRoaXMuYmx1ZXByaW50LnN0YXJ0KGJsYWNrYm9hcmQpXG4gICAgbGV0IHJ1bkNvdW50ID0gMFxuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuZGVjb3JhdGUoXG4gICAgICAoKSA9PiB7XG4gICAgICAgICsrcnVuQ291bnRcbiAgICAgICAgcmV0dXJuIHJlZ2lzdHJ5TG9va1VwKHRoaXMuYmx1ZXByaW50Lm5vZGUpLnJ1bihibGFja2JvYXJkLCB7XG4gICAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICAgIHJlcnVuLFxuICAgICAgICAgIGludHJvc3BlY3RvcixcbiAgICAgICAgICByZWdpc3RyeUxvb2tVcFxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIGJsYWNrYm9hcmQsXG4gICAgICB0aGlzLmNvbmZpZ1xuICAgIClcblxuICAgIGlmIChyZXN1bHQgIT09IFJVTk5JTkcpIHtcbiAgICAgIHRoaXMuYmx1ZXByaW50LmVuZChibGFja2JvYXJkKVxuICAgIH1cbiAgICBpZiAoaW50cm9zcGVjdG9yKSB7XG4gICAgICBpbnRyb3NwZWN0b3Iud3JhcExhc3QocnVuQ291bnQsIHRoaXMsIHJlc3VsdCwgYmxhY2tib2FyZClcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgc2V0Q29uZmlnKGNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnXG4gIH1cbn1cbiIsImltcG9ydCB7IFJVTk5JTkcsIEZBSUxVUkUgfSBmcm9tICcuLi9jb25zdGFudHMnXG5pbXBvcnQgRGVjb3JhdG9yIGZyb20gJy4uL0RlY29yYXRvcidcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWx3YXlzRmFpbERlY29yYXRvciBleHRlbmRzIERlY29yYXRvciB7XG4gIG5vZGVUeXBlID0gJ0Fsd2F5c0ZhaWxEZWNvcmF0b3InXG5cbiAgZGVjb3JhdGUocnVuKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gcnVuKClcbiAgICBpZiAocmVzdWx0ID09PSBSVU5OSU5HKSByZXR1cm4gUlVOTklOR1xuICAgIHJldHVybiBGQUlMVVJFXG4gIH1cbn1cbiIsImltcG9ydCB7IFJVTk5JTkcsIFNVQ0NFU1MgfSBmcm9tICcuLi9jb25zdGFudHMnXG5pbXBvcnQgRGVjb3JhdG9yIGZyb20gJy4uL0RlY29yYXRvcidcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWx3YXlzU3VjY2VlZERlY29yYXRvciBleHRlbmRzIERlY29yYXRvciB7XG4gIG5vZGVUeXBlID0gJ0Fsd2F5c1N1Y2NlZWREZWNvcmF0b3InXG5cbiAgZGVjb3JhdGUocnVuKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gcnVuKClcbiAgICBpZiAocmVzdWx0ID09PSBSVU5OSU5HKSByZXR1cm4gUlVOTklOR1xuICAgIHJldHVybiBTVUNDRVNTXG4gIH1cbn1cbiIsImltcG9ydCB7IEZBSUxVUkUgfSBmcm9tICcuLi9jb25zdGFudHMnXG5pbXBvcnQgRGVjb3JhdG9yIGZyb20gJy4uL0RlY29yYXRvcidcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29vbGRvd25EZWNvcmF0b3IgZXh0ZW5kcyBEZWNvcmF0b3Ige1xuICBub2RlVHlwZSA9ICdDb29sZG93bkRlY29yYXRvcidcblxuICBzZXRDb25maWcoeyBjb29sZG93biA9IDUgfSkge1xuICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgY29vbGRvd25cbiAgICB9XG4gIH1cblxuICBkZWNvcmF0ZShydW4pIHtcbiAgICBpZiAodGhpcy5sb2NrKSB7XG4gICAgICByZXR1cm4gRkFJTFVSRVxuICAgIH1cbiAgICB0aGlzLmxvY2sgPSB0cnVlXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmxvY2sgPSBmYWxzZVxuICAgIH0sIHRoaXMuY29uZmlnLmNvb2xkb3duICogMTAwMClcbiAgICByZXR1cm4gcnVuKClcbiAgfVxufVxuIiwiaW1wb3J0IHsgUlVOTklORywgU1VDQ0VTUywgRkFJTFVSRSB9IGZyb20gJy4uL2NvbnN0YW50cydcbmltcG9ydCBEZWNvcmF0b3IgZnJvbSAnLi4vRGVjb3JhdG9yJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnZlcnREZWNvcmF0b3IgZXh0ZW5kcyBEZWNvcmF0b3Ige1xuICBub2RlVHlwZSA9ICdJbnZlcnREZWNvcmF0b3InXG5cbiAgZGVjb3JhdGUocnVuKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gcnVuKClcbiAgICBpZiAocmVzdWx0ID09PSBSVU5OSU5HKSByZXR1cm4gUlVOTklOR1xuICAgIHJldHVybiByZXN1bHQgPT09IFNVQ0NFU1MgPyBGQUlMVVJFIDogU1VDQ0VTU1xuICB9XG59XG4iLCJpbXBvcnQgeyBGQUlMVVJFIH0gZnJvbSAnLi4vY29uc3RhbnRzJ1xuaW1wb3J0IERlY29yYXRvciBmcm9tICcuLi9EZWNvcmF0b3InXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExvb3BEZWNvcmF0b3IgZXh0ZW5kcyBEZWNvcmF0b3Ige1xuICBub2RlVHlwZSA9ICdMb29wRGVjb3JhdG9yJ1xuXG4gIHNldENvbmZpZyh7IGxvb3AgPSBJbmZpbml0eSB9KSB7XG4gICAgdGhpcy5jb25maWcgPSB7XG4gICAgICBsb29wXG4gICAgfVxuICB9XG5cbiAgZGVjb3JhdGUocnVuKSB7XG4gICAgbGV0IGkgPSAwXG4gICAgbGV0IHJlc3VsdCA9IEZBSUxVUkVcbiAgICB3aGlsZSAoaSsrIDwgdGhpcy5jb25maWcubG9vcCkge1xuICAgICAgcmVzdWx0ID0gcnVuKClcbiAgICAgIGlmIChyZXN1bHQgPT09IEZBSUxVUkUpIHJldHVybiBGQUlMVVJFXG4gICAgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxufVxuIiwiaW1wb3J0IHsgUlVOTklORyB9IGZyb20gJy4vY29uc3RhbnRzJ1xuaW1wb3J0IE5vZGUgZnJvbSAnLi9Ob2RlJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCcmFuY2hOb2RlIGV4dGVuZHMgTm9kZSB7XG4gIG5vZGVUeXBlID0gJ0JyYW5jaE5vZGUnXG5cbiAgY29uc3RydWN0b3IoYmx1ZXByaW50KSB7XG4gICAgc3VwZXIoYmx1ZXByaW50KVxuXG4gICAgdGhpcy5udW1Ob2RlcyA9IGJsdWVwcmludC5ub2Rlcy5sZW5ndGhcbiAgICB0aGlzLndhc1J1bm5pbmcgPSBmYWxzZVxuICB9XG5cbiAgcnVuKGJsYWNrYm9hcmQgPSBudWxsLCB7IGluZGV4ZXMgPSBbXSwgaW50cm9zcGVjdG9yLCByZXJ1biwgcmVnaXN0cnlMb29rVXAgPSAoeCkgPT4geCB9ID0ge30pIHtcbiAgICBpZiAoIXJlcnVuKSB0aGlzLmJsdWVwcmludC5zdGFydChibGFja2JvYXJkKVxuICAgIGxldCBvdmVyYWxsUmVzdWx0ID0gdGhpcy5TVEFSVF9DQVNFXG4gICAgbGV0IGN1cnJlbnRJbmRleCA9IGluZGV4ZXMuc2hpZnQoKSB8fCAwXG4gICAgd2hpbGUgKGN1cnJlbnRJbmRleCA8IHRoaXMubnVtTm9kZXMpIHtcbiAgICAgIGNvbnN0IG5vZGUgPSByZWdpc3RyeUxvb2tVcCh0aGlzLmJsdWVwcmludC5ub2Rlc1tjdXJyZW50SW5kZXhdKVxuICAgICAgY29uc3QgcmVzdWx0ID0gbm9kZS5ydW4oYmxhY2tib2FyZCwgeyBpbmRleGVzLCBpbnRyb3NwZWN0b3IsIHJlcnVuLCByZWdpc3RyeUxvb2tVcCB9KVxuICAgICAgaWYgKHJlc3VsdCA9PT0gUlVOTklORykge1xuICAgICAgICB0aGlzLndhc1J1bm5pbmcgPSB0cnVlXG4gICAgICAgIG92ZXJhbGxSZXN1bHQgPSBbY3VycmVudEluZGV4LCAuLi5pbmRleGVzXVxuICAgICAgICBicmVha1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcmVzdWx0ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAvLyBhcnJheVxuICAgICAgICBvdmVyYWxsUmVzdWx0ID0gWy4uLmluZGV4ZXMsIGN1cnJlbnRJbmRleCwgLi4ucmVzdWx0XVxuICAgICAgICBicmVha1xuICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT09IHRoaXMuT1BUX09VVF9DQVNFKSB7XG4gICAgICAgIG92ZXJhbGxSZXN1bHQgPSByZXN1bHRcbiAgICAgICAgYnJlYWtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMud2FzUnVubmluZyA9IGZhbHNlXG4gICAgICAgIHJlcnVuID0gZmFsc2VcbiAgICAgICAgKytjdXJyZW50SW5kZXhcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgaXNSdW5uaW5nID0gb3ZlcmFsbFJlc3VsdCA9PT0gUlVOTklORyB8fCB0eXBlb2Ygb3ZlcmFsbFJlc3VsdCA9PT0gJ29iamVjdCdcbiAgICBpZiAoIWlzUnVubmluZykge1xuICAgICAgdGhpcy5ibHVlcHJpbnQuZW5kKGJsYWNrYm9hcmQpXG4gICAgfVxuICAgIGlmIChpbnRyb3NwZWN0b3IpIHtcbiAgICAgIGNvbnN0IGRlYnVnUmVzdWx0ID0gaXNSdW5uaW5nID8gUlVOTklORyA6IG92ZXJhbGxSZXN1bHRcbiAgICAgIGludHJvc3BlY3Rvci53cmFwTGFzdChNYXRoLm1pbihjdXJyZW50SW5kZXggKyAxLCB0aGlzLm51bU5vZGVzKSwgdGhpcywgZGVidWdSZXN1bHQsIGJsYWNrYm9hcmQpXG4gICAgfVxuICAgIHJldHVybiBvdmVyYWxsUmVzdWx0XG4gIH1cbn1cbiIsImltcG9ydCB7IFJVTk5JTkcgfSBmcm9tICcuL2NvbnN0YW50cydcbmltcG9ydCBCcmFuY2hOb2RlIGZyb20gJy4vQnJhbmNoTm9kZSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmFuZG9tIGV4dGVuZHMgQnJhbmNoTm9kZSB7XG4gIG5vZGVUeXBlID0gJ1JhbmRvbSdcblxuICBydW4oYmxhY2tib2FyZCA9IG51bGwsIHsgaW5kZXhlcyA9IFtdLCBpbnRyb3NwZWN0b3IsIHJlcnVuLCByZWdpc3RyeUxvb2tVcCA9ICh4KSA9PiB4IH0gPSB7fSkge1xuICAgIGlmICghcmVydW4pIHRoaXMuYmx1ZXByaW50LnN0YXJ0KGJsYWNrYm9hcmQpXG4gICAgbGV0IGN1cnJlbnRJbmRleCA9IGluZGV4ZXMuc2hpZnQoKSB8fCAwXG4gICAgaWYgKCFyZXJ1bikge1xuICAgICAgY3VycmVudEluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5udW1Ob2RlcylcbiAgICB9XG4gICAgY29uc3Qgbm9kZSA9IHJlZ2lzdHJ5TG9va1VwKHRoaXMuYmx1ZXByaW50Lm5vZGVzW2N1cnJlbnRJbmRleF0pXG4gICAgY29uc3QgcmVzdWx0ID0gbm9kZS5ydW4oYmxhY2tib2FyZCwgeyBpbmRleGVzLCBpbnRyb3NwZWN0b3IsIHJlcnVuLCByZWdpc3RyeUxvb2tVcCB9KVxuICAgIGxldCBvdmVyYWxsUmVzdWx0ID0gcmVzdWx0XG4gICAgaWYgKHJlc3VsdCA9PT0gUlVOTklORykge1xuICAgICAgb3ZlcmFsbFJlc3VsdCA9IFtjdXJyZW50SW5kZXgsIC4uLmluZGV4ZXNdXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgcmVzdWx0ID09PSAnb2JqZWN0Jykge1xuICAgICAgLy8gYXJyYXlcbiAgICAgIG92ZXJhbGxSZXN1bHQgPSBbLi4uaW5kZXhlcywgY3VycmVudEluZGV4LCAuLi5yZXN1bHRdXG4gICAgfVxuICAgIGNvbnN0IGlzUnVubmluZyA9IG92ZXJhbGxSZXN1bHQgPT09IFJVTk5JTkcgfHwgdHlwZW9mIG92ZXJhbGxSZXN1bHQgPT09ICdvYmplY3QnXG4gICAgaWYgKCFpc1J1bm5pbmcpIHtcbiAgICAgIHRoaXMuYmx1ZXByaW50LmVuZChibGFja2JvYXJkKVxuICAgIH1cbiAgICBpZiAoaW50cm9zcGVjdG9yKSB7XG4gICAgICBjb25zdCBkZWJ1Z1Jlc3VsdCA9IGlzUnVubmluZyA/IFJVTk5JTkcgOiBvdmVyYWxsUmVzdWx0XG4gICAgICBpbnRyb3NwZWN0b3Iud3JhcExhc3QoMSwgdGhpcywgZGVidWdSZXN1bHQsIGJsYWNrYm9hcmQpXG4gICAgfVxuICAgIHJldHVybiBvdmVyYWxsUmVzdWx0XG4gIH1cbn1cbiIsImltcG9ydCB7IFNVQ0NFU1MsIEZBSUxVUkUgfSBmcm9tICcuL2NvbnN0YW50cydcbmltcG9ydCBCcmFuY2hOb2RlIGZyb20gJy4vQnJhbmNoTm9kZSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VsZWN0b3IgZXh0ZW5kcyBCcmFuY2hOb2RlIHtcbiAgbm9kZVR5cGUgPSAnU2VsZWN0b3InXG4gIFNUQVJUX0NBU0UgPSBGQUlMVVJFXG4gIE9QVF9PVVRfQ0FTRSA9IFNVQ0NFU1Ncbn1cbiIsImltcG9ydCB7IFNVQ0NFU1MsIEZBSUxVUkUgfSBmcm9tICcuL2NvbnN0YW50cydcbmltcG9ydCBCcmFuY2hOb2RlIGZyb20gJy4vQnJhbmNoTm9kZSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VxdWVuY2UgZXh0ZW5kcyBCcmFuY2hOb2RlIHtcbiAgbm9kZVR5cGUgPSAnU2VxdWVuY2UnXG4gIFNUQVJUX0NBU0UgPSBTVUNDRVNTXG4gIE9QVF9PVVRfQ0FTRSA9IEZBSUxVUkVcbn1cbiIsImltcG9ydCBEZWNvcmF0b3IgZnJvbSAnLi9EZWNvcmF0b3InXG5pbXBvcnQgUmFuZG9tIGZyb20gJy4vUmFuZG9tJ1xuaW1wb3J0IFNlbGVjdG9yIGZyb20gJy4vU2VsZWN0b3InXG5pbXBvcnQgU2VxdWVuY2UgZnJvbSAnLi9TZXF1ZW5jZSdcbmltcG9ydCBUYXNrIGZyb20gJy4vVGFzaydcbmltcG9ydCBBbHdheXNGYWlsRGVjb3JhdG9yIGZyb20gJy4vZGVjb3JhdG9ycy9BbHdheXNGYWlsRGVjb3JhdG9yJ1xuaW1wb3J0IEFsd2F5c1N1Y2NlZWREZWNvcmF0b3IgZnJvbSAnLi9kZWNvcmF0b3JzL0Fsd2F5c1N1Y2NlZWREZWNvcmF0b3InXG5pbXBvcnQgQ29vbGRvd25EZWNvcmF0b3IgZnJvbSAnLi9kZWNvcmF0b3JzL0Nvb2xkb3duRGVjb3JhdG9yJ1xuaW1wb3J0IEludmVydERlY29yYXRvciBmcm9tICcuL2RlY29yYXRvcnMvSW52ZXJ0RGVjb3JhdG9yJ1xuaW1wb3J0IExvb3BEZWNvcmF0b3IgZnJvbSAnLi9kZWNvcmF0b3JzL0xvb3BEZWNvcmF0b3InXG5pbXBvcnQgeyByZWdpc3RyeUxvb2tVcCB9IGZyb20gJy4vQmVoYXZpb3JUcmVlJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCZWhhdmlvclRyZWVJbXBvcnRlciB7XG4gIHR5cGVzID0ge1xuICAgIHRhc2s6IFRhc2ssXG4gICAgZGVjb3JhdG9yOiBEZWNvcmF0b3IsXG4gICAgc2VsZWN0b3I6IFNlbGVjdG9yLFxuICAgIHNlcXVlbmNlOiBTZXF1ZW5jZSxcbiAgICByYW5kb206IFJhbmRvbSxcbiAgICBpbnZlcnQ6IEludmVydERlY29yYXRvcixcbiAgICBmYWlsOiBBbHdheXNGYWlsRGVjb3JhdG9yLFxuICAgIHN1Y2NlZWQ6IEFsd2F5c1N1Y2NlZWREZWNvcmF0b3IsXG4gICAgY29vbGRvd246IENvb2xkb3duRGVjb3JhdG9yLFxuICAgIGxvb3A6IExvb3BEZWNvcmF0b3JcbiAgfVxuXG4gIGRlZmluZVR5cGUodHlwZSwgS2xhc3MpIHtcbiAgICB0aGlzLnR5cGVzW3R5cGVdID0gS2xhc3NcbiAgfVxuXG4gIHBhcnNlKGpzb24pIHtcbiAgICBjb25zdCB7IHR5cGUsIG5hbWUsIG5vZGUsIG5vZGVzLCAuLi5jb25maWcgfSA9IGpzb25cbiAgICBjb25zdCBLbGFzcyA9IHRoaXMudHlwZXNbdHlwZV1cbiAgICBpZiAoIUtsYXNzKSB7XG4gICAgICBjb25zdCByZWdpc3RlcmVkTm9kZSA9IHJlZ2lzdHJ5TG9va1VwKHR5cGUpXG4gICAgICBpZiAocmVnaXN0ZXJlZE5vZGUpIHtcbiAgICAgICAgcmVnaXN0ZXJlZE5vZGUubmFtZSA9IG5hbWVcbiAgICAgICAgcmV0dXJuIHJlZ2lzdGVyZWROb2RlXG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYERvbid0IGtub3cgaG93IHRvIGhhbmRsZSB0eXBlICR7dHlwZX0uIFBsZWFzZSByZWdpc3RlciB0aGlzIGZpcnN0LmApXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBLbGFzcyh7XG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgbm9kZTogbm9kZSA/IHRoaXMucGFyc2Uobm9kZSkgOiBudWxsLFxuICAgICAgbm9kZXM6IG5vZGVzID8gbm9kZXMubWFwKChzdWJKc29uKSA9PiB0aGlzLnBhcnNlKHN1Ykpzb24pKSA6IG51bGwsXG4gICAgICBjb25maWdcbiAgICB9KVxuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBJbnRyb3NwZWN0b3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnJlc3VsdHMgPSBbXVxuICB9XG5cbiAgc3RhcnQodHJlZSkge1xuICAgIHRoaXMudHJlZSA9IHRyZWVcbiAgICB0aGlzLmN1cnJlbnRSZXN1bHQgPSBbXVxuICB9XG5cbiAgZW5kKCkge1xuICAgIHRoaXMucmVzdWx0cy5wdXNoKHRoaXMuY3VycmVudFJlc3VsdC5wb3AoKSlcbiAgICBkZWxldGUgdGhpcy50cmVlXG4gICAgZGVsZXRlIHRoaXMuY3VycmVudFJlc3VsdFxuICB9XG5cbiAgcHVzaChub2RlLCByZXN1bHQsIGJsYWNrYm9hcmQpIHtcbiAgICB0aGlzLmN1cnJlbnRSZXN1bHQucHVzaCh0aGlzLl90b1Jlc3VsdChub2RlLCByZXN1bHQsIGJsYWNrYm9hcmQpKVxuICB9XG5cbiAgd3JhcExhc3QobnVtUmVzdWx0cywgbm9kZSwgcmVzdWx0LCBibGFja2JvYXJkKSB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmN1cnJlbnRSZXN1bHQuc3BsaWNlKHRoaXMuY3VycmVudFJlc3VsdC5sZW5ndGggLSBudW1SZXN1bHRzLCBudW1SZXN1bHRzKVxuICAgIHRoaXMuY3VycmVudFJlc3VsdC5wdXNoKHsgLi4udGhpcy5fdG9SZXN1bHQobm9kZSwgcmVzdWx0LCBibGFja2JvYXJkKSwgY2hpbGRyZW4gfSlcbiAgfVxuXG4gIF90b1Jlc3VsdChub2RlLCByZXN1bHQpIHtcbiAgICByZXR1cm4geyAuLi4obm9kZS5uYW1lID8geyBuYW1lOiBub2RlLm5hbWUgfSA6IHt9KSwgcmVzdWx0IH1cbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMucmVzdWx0cyA9IFtdXG4gIH1cblxuICBnZXQgbGFzdFJlc3VsdCgpIHtcbiAgICBpZiAodGhpcy5yZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucmVzdWx0c1t0aGlzLnJlc3VsdHMubGVuZ3RoIC0gMV1cbiAgfVxufVxuIiwiaW1wb3J0IEJlaGF2aW9yVHJlZSwgeyBnZXRSZWdpc3RyeSwgcmVnaXN0cnlMb29rVXAgfSBmcm9tICcuL0JlaGF2aW9yVHJlZSdcbmltcG9ydCAqIGFzIGRlY29yYXRvcnMgZnJvbSAnLi9kZWNvcmF0b3JzJ1xuXG5pbXBvcnQgQmVoYXZpb3JUcmVlSW1wb3J0ZXIgZnJvbSAnLi9CZWhhdmlvclRyZWVJbXBvcnRlcidcblxuaW1wb3J0IEJyYW5jaE5vZGUgZnJvbSAnLi9CcmFuY2hOb2RlJ1xuaW1wb3J0IE5vZGUgZnJvbSAnLi9Ob2RlJ1xuaW1wb3J0IFNlbGVjdG9yIGZyb20gJy4vU2VsZWN0b3InXG5pbXBvcnQgU2VxdWVuY2UgZnJvbSAnLi9TZXF1ZW5jZSdcbmltcG9ydCBSYW5kb20gZnJvbSAnLi9SYW5kb20nXG5pbXBvcnQgRGVjb3JhdG9yIGZyb20gJy4vRGVjb3JhdG9yJ1xuaW1wb3J0IFRhc2sgZnJvbSAnLi9UYXNrJ1xuaW1wb3J0IEludHJvc3BlY3RvciBmcm9tICcuL0ludHJvc3BlY3RvcidcblxuaW1wb3J0IHsgU1VDQ0VTUywgRkFJTFVSRSwgUlVOTklORyB9IGZyb20gJy4vY29uc3RhbnRzJ1xuXG5leHBvcnQgZGVmYXVsdCBCZWhhdmlvclRyZWVcblxuZXhwb3J0IHtcbiAgQmVoYXZpb3JUcmVlLFxuICBTVUNDRVNTLFxuICBGQUlMVVJFLFxuICBSVU5OSU5HLFxuICBnZXRSZWdpc3RyeSxcbiAgcmVnaXN0cnlMb29rVXAsXG4gIEJlaGF2aW9yVHJlZUltcG9ydGVyLFxuICBCcmFuY2hOb2RlLFxuICBOb2RlLFxuICBTZWxlY3RvcixcbiAgU2VxdWVuY2UsXG4gIFJhbmRvbSxcbiAgRGVjb3JhdG9yLFxuICBUYXNrLFxuICBJbnRyb3NwZWN0b3IsXG4gIGRlY29yYXRvcnNcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=